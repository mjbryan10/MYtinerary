{"version":3,"sources":["store/actions/userActions.ts","store/actions/loginActions.ts","components/nav/Drawer.tsx","components/nav/Nav.tsx","store/actions/currentCityActions.ts","components/cities/CityCard.tsx","components/landing/DestinationControls.tsx","components/global/Spinner.tsx","store/actions/cityActions.ts","components/landing/Destinations.tsx","components/landing/Header.tsx","components/landing/StartBrowsing.tsx","components/landing/Landing.tsx","components/global/Search.tsx","components/cities/Cities.tsx","components/global/PopLogin.tsx","components/author/AuthorAvatar.tsx","components/itineraries/ItineraryCardHeader.tsx","components/global/SubmitButton.tsx","components/itineraries/comments/CommentForm.tsx","components/itineraries/comments/CommentMenu.tsx","components/itineraries/comments/Comment.tsx","components/itineraries/comments/Comments.tsx","components/itineraries/ItineraryActivties.tsx","components/itineraries/ItineraryCard.tsx","store/actions/itineraryActions.ts","components/itineraries/CityItineraries.tsx","components/favourites/Favourites.tsx","components/account/PasswordInput.tsx","components/account/UploadImage.tsx","components/global/SimplePopover.tsx","components/account/CreateAccount.tsx","components/account/LoginPage.tsx","components/NotFound.tsx","components/footer/Footer.tsx","components/app/App.tsx","serviceWorker.ts","store/reducers/citiesReducer.ts","store/reducers/currentCityReducer.ts","store/reducers/itineraryReducer.ts","store/reducers/loginReducer.ts","store/reducers/userReducer.ts","store/reducers/rootReducer.ts","index.tsx","components/landing/circled-right-2.png","components/footer/homeIcon.png"],"names":["fetchCurrentUser","token","dispatch","type","fetch","method","headers","Accept","body","JSON","stringify","then","res","json","error","msg","expired","payload","fetchUserSuccess","catch","updateLoginStatus","window","localStorage","getItem","userLoggedIn","useStyles","makeStyles","theme","createStyles","list","width","fullList","menuButton","marginRight","spacing","TemporaryDrawer","side","classes","React","useState","top","left","bottom","right","state","setState","toggleDrawer","open","event","key","Button","onClick","className","color","Drawer","anchor","onClose","role","onKeyDown","List","to","ListItem","button","ListItemIcon","ListItemText","primary","root","bar","display","justifyContent","connect","loggedIn","login","details","currentUser","userSuccess","success","bindActionCreators","fetchCurrentUserAction","props","anchorEl","setAnchorEl","Boolean","handleClose","e","logOut","removeItem","useEffect","AppBar","position","style","margin","Toolbar","IconButton","aria-label","aria-controls","aria-haspopup","currentTarget","Menu","id","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","MenuItem","preventDefault","name","resetCurrentCity","fetchCurrentCity","cityName","err","message","loading","currentCity","city","cities","fetchCurrentCityAction","cityImg","imgCredit","src","alt","controlsContainer","flexFlow","maxWidth","alignItems","height","padding","buttonControls","pointerEvents","DestinationControls","slideIndex","slideLength","onButtonClick","onSpanClick","handleClick","target","value","console","log","getAttribute","parseInt","variant","Array","map","element","index","data-index","marginLeft","Spinner","CircularProgress","fetchCitiesSuccess","fetchCitiesError","fetchTopCities","fetchAllCities","status","destinationContainer","minHeight","cardsContainer","fetchCities","fetchTopCitiesAction","setSlideLength","setSlideIndex","updateState","Math","ceil","length","array","filteredArray","i","push","filterByCurrentSlide","img","img_credit","direction","spanIndex","Header","StartBrowsing","CircleRight","Landing","flexGrow","search","borderRadius","shape","backgroundColor","fade","palette","common","white","breakpoints","up","searchIcon","inputRoot","inputInput","transition","transitions","create","Search","onChange","InputBase","placeholder","input","inputProps","hasLoaded","loginPending","pending","fetchAllCitiesAction","searchStr","setSearchStr","filtered","toLowerCase","filterCities","AlertDialog","handlePopLogin","Dialog","aria-labelledby","aria-describedby","DialogTitle","DialogContent","DialogContentText","DialogActions","autoFocus","textOverflow","avatarContainer","AuthorAvatar","authorId","authorInitialState","itineraries","_id","author","setAuthor","authorLoading","setAuthorLoading","Avatar","header","flex","stats","costIndex","fontWeight","fontSize","tags","heart","cursor","transform","favourites","itinerary","isFav","setIsFav","includes","duration","updateFavourites","action","itinId","fav","popLogIn","setPopLogIn","author_id","title","likes","cost_rating","cost","tag","checked","disabled","htmlFor","PopLogin","wrapper","buttonSuccess","green","buttonProgress","marginTop","SubmitButton","text","successText","buttonClassname","clsx","size","userName","prop","updateCommentArray","values","setValues","errors","setErrors","setSuccess","setPending","a","itin","response","onSubmit","postComment","comment","FormControl","TextField","multiline","rows","rowsMax","FormHelperText","CommentMenu","deleteComment","PaperProps","maxHeight","ITEM_HEIGHT","useStyle","boxSizing","lineHeight","wordWrap","whiteSpace","wordBreak","main","date","userIsAuthor","setUserIsAuthor","checkUserPrivileges","Typography","difference","Date","now","diffHours","floor","days","dateComparison","posted","loader","initialState","data","page","count","successAction","reducer","comments","command","filter","Error","useReducer","getFetchUrl","fetchComments","updateAction","loadComments","changePageAction","activitiesContainer","overflowX","activity","ItineraryActivties","activities","moreBtn","ItineraryCard","moreToggled","setmoreToggled","Paper","elevation","fetchItinerariesSuccess","resetItineraries","fetchCurrentCityItineraries","cityId","erorr","fetchItinerarybyId","fetchItinerariesById","isArray","Promise","all","results","cityLoading","itinerariesLoading","fetchItineraries","fetchItinerariesAction","resetItinerariesAction","resetCurrentCityAction","useParams","itinSuccess","itinLoading","redirect","fetchItinerariesByIdAction","favIds","setFavIds","favPending","setFavPending","favSuccess","setFavSuccess","fetchUserFavourites","textAlign","flexWrap","withoutLabel","textField","InputAdornments","onValueChange","validPassword","errorString","password","showPassword","InputLabel","Input","endAdornment","InputAdornment","onMouseDown","UploadImage","accept","multiple","component","startIcon","typography","SimplePopover","textString","elementAnchor","undefined","Popover","formRoot","upload","CreateAccount","email","isPosting","setIsPosting","isDuplicate","duplicateEmail","setDuplicateEmail","handleValueChange","newValue","postUser","hasOwnProperty","result","object","param","updateErrors","duplicate","document","getElementById","PasswordInput","createLink","setloading","loginSuccess","setLoginSuccess","redirectToHome","setRedirectToHome","errorsObj","submitLogin","setItem","setTimeout","NotFound","Footer","home","createMuiTheme","secondary","basename","ThemeProvider","exact","path","Cities","CityItineraries","Favourites","LoginPage","location","hostname","match","initialCitiesState","initialCurrentCityState","initialItineraryState","initialLoginState","intialUserState","rootReducer","combineReducers","middlewares","thunk","store","createStore","composeWithDevTools","applyMiddleware","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister","module","exports"],"mappings":"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","file":"static/js/main.ce27877f.chunk.js","sourcesContent":["export const USER_PENDING = \"USER_PENDING\";\r\nexport const USER_SUCCESS = \"USER_SUCCESS\";\r\nexport const USER_ERROR = \"USER_ERROR\";\r\nexport const CLEAR_CURRENT_USER = \"CLEAR_CURRENT_USER\";\r\nexport const USER_EXPIRED = \"USER_EXPIRED\";\r\n// export const ADD_FAV = \"ADD_FAV\";\r\n// export const DEL_FAV = \"DEL_FAV\";\r\n// export const CLEAR_FAV = \"CLEAR_FAV\";\r\n\r\nexport function fetchUserPending(): object {\r\n\treturn {\r\n\t\ttype: USER_PENDING,\r\n\t};\r\n}\r\nexport function fetchUserSuccess(payload: any): object {\r\n\treturn {\r\n\t\ttype: USER_SUCCESS,\r\n\t\tpayload,\r\n\t};\r\n}\r\nexport function fetchUserFailure(payload: any): object {\r\n\treturn {\r\n\t\ttype: USER_ERROR,\r\n\t\tpayload,\r\n\t};\r\n}\r\nexport function clearCurrentUser(): object {\r\n\treturn {\r\n\t\ttype: CLEAR_CURRENT_USER,\r\n\t};\r\n}\r\nexport function expiredUser(payload: any): object {\r\n\treturn {\r\n\t\ttype: USER_EXPIRED,\r\n\t\tpayload,\r\n\t};\r\n}\r\n\r\n// export function updateFav(action: string, payload: any): object {\r\n// \tif (action === \"add\") {\r\n// \t\treturn {\r\n// \t\t\ttype: ADD_FAV,\r\n// \t\t\tpayload,\r\n// \t\t};\r\n// \t} else if (action === \"del\") {\r\n// \t\treturn {\r\n// \t\t\ttype: DEL_FAV,\r\n// \t\t\tpayload,\r\n// \t\t};\r\n// \t}\r\n// \treturn {\r\n// \t\ttype: CLEAR_FAV,\r\n// \t\tpayload: [],\r\n// \t};\r\n// }\r\n\r\nexport const fetchCurrentUser = (token: string) => {\r\n\treturn (dispatch: any) => {\r\n\t\tdispatch(fetchUserPending());\r\n\t\tfetch(\"https://my-itinerary-demo.herokuapp.com/usersAPI/user\", {\r\n\t\t\tmethod: \"post\",\r\n\t\t\theaders: {\r\n\t\t\t\tAccept: \"application/json, text/plain, */*\",\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({ token }),\r\n\t\t})\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (res.error) {\r\n\t\t\t\t\tthrow res.msg;\r\n\t\t\t\t}\r\n\t\t\t\tif (res.expired) {\r\n\t\t\t\t\tdispatch(expiredUser(res.msg));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdispatch(fetchUserSuccess(res));\r\n\t\t\t\t}\r\n\t\t\t\treturn res;\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tdispatch(fetchUserFailure(error.msg));\r\n\t\t\t});\r\n\t};\r\n};\r\n\r\n// export const updateFavourites = (action: string, itinId: string, token: string) => {\r\n// \treturn (dispatch: any) => {\r\n// \t\tfetch(`http://localhost:5000/usersAPI/${action}/fav`, {\r\n// \t\t\tmethod: \"put\",\r\n// \t\t\theaders: {\r\n// \t\t\t\tAccept: \"application/json, text/plain, */*\",\r\n// \t\t\t\t\"Content-Type\": \"application/json\",\r\n// \t\t\t\t\"x-api-key\": token,\r\n// \t\t\t},\r\n// \t\t\tbody: JSON.stringify({ fav: itinId }),\r\n// \t\t})\r\n// \t\t\t.then((res: any) => res.json())\r\n// \t\t\t.then((res: any) => {\r\n// \t\t\t\tif (res.success) {\r\n// \t\t\t\t\tdispatch(updateFav(action, itinId));\r\n// \t\t\t\t}\r\n// \t\t\t});\r\n// \t};\r\n// };\r\n","import {clearCurrentUser} from \"./userActions\"\r\nexport const USER_LOGGED_IN = \"USER_LOGGED_IN\";\r\nexport const USER_LOGGED_OUT = \"USER_LOGGED_OUT\";\r\nexport const REDIRECT = \"REDIRECT\";\r\n\r\nexport function userLoggedIn(token: any): object {\r\n\treturn {\r\n\t\ttype: USER_LOGGED_IN,\r\n\t\tpayload: token,\r\n\t};\r\n}\r\nexport function userLoggedOut(): object {\r\n\treturn {\r\n\t\ttype: USER_LOGGED_OUT,\r\n\t};\r\n}\r\n// export function redirectToLogIn(): object {\r\n// \treturn {\r\n// \t\ttype: REDIRECT,\r\n// \t}\r\n// }\r\n\r\nexport const tokenFromStorage = (): string | null => {\r\n\treturn window.localStorage.getItem(\"session_token\");\r\n};\r\n\r\nexport const updateLoginStatus = (): any => {\r\n\tlet token: any = tokenFromStorage();\r\n\tif (token === null) {\r\n\t\treturn (dispatch: any) => {\r\n            dispatch(userLoggedOut());\r\n            dispatch(clearCurrentUser());\r\n\t\t};\r\n\t} else {\r\n\t\treturn (dispatch: any) => {\r\n\t\t\tdispatch(userLoggedIn(token));\r\n\t\t};\r\n\t}\r\n}\r\n\r\nexport const logUserOut = ():void => {\r\n\twindow.localStorage.removeItem(\"session_token\");\r\n\tupdateLoginStatus();\r\n}\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\n//MATERIAL-UI\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\n\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport LocationCityIcon from \"@material-ui/icons/LocationCity\";\r\nimport ListAltIcon from '@material-ui/icons/ListAlt';\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport HomeIcon from \"@material-ui/icons/Home\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n\tcreateStyles({\r\n\t\tlist: {\r\n\t\t\twidth: 250,\r\n\t\t},\r\n\t\tfullList: {\r\n\t\t\twidth: \"auto\",\r\n\t\t},\r\n\t\tmenuButton: {\r\n\t\t\tmarginRight: theme.spacing(2),\r\n\t\t},\r\n\t})\r\n);\r\n\r\nexport default function TemporaryDrawer() {\r\n\tconst classes = useStyles();\r\n\tconst [state, setState] = React.useState({\r\n\t\ttop: false,\r\n\t\tleft: false,\r\n\t\tbottom: false,\r\n\t\tright: false,\r\n\t});\r\n\r\n\ttype DrawerSide = \"top\" | \"left\" | \"bottom\" | \"right\";\r\n\tconst toggleDrawer = (side: DrawerSide, open: boolean) => (\r\n\t\tevent: React.KeyboardEvent | React.MouseEvent\r\n\t) => {\r\n\t\tif (\r\n\t\t\tevent.type === \"keydown\" &&\r\n\t\t\t((event as React.KeyboardEvent).key === \"Tab\" ||\r\n\t\t\t\t(event as React.KeyboardEvent).key === \"Shift\")\r\n\t\t) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetState({ ...state, [side]: open });\r\n\t};\r\n\r\n\tconst sideList = (side: DrawerSide) => (\r\n\t\t<div\r\n\t\t\tclassName={classes.list}\r\n\t\t\trole=\"presentation\"\r\n\t\t\tonClick={toggleDrawer(side, false)}\r\n\t\t\tonKeyDown={toggleDrawer(side, false)}\r\n\t\t>\r\n\t\t\t<List>\r\n\t\t\t\t<Link to={\"/\"} key=\"0\">\r\n\t\t\t\t\t<ListItem button>\r\n\t\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t\t<HomeIcon />\r\n\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t<ListItemText primary=\"Home\" />\r\n\t\t\t\t\t</ListItem>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<Link to={\"/cities\"} key=\"1\">\r\n\t\t\t\t\t<ListItem button>\r\n\t\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t\t<LocationCityIcon />\r\n\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t<ListItemText primary=\"Cities\" />\r\n\t\t\t\t\t</ListItem>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<Link to={\"/favourites\"} key=\"2\">\r\n\t\t\t\t\t<ListItem button>\r\n\t\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t\t<ListAltIcon />\r\n\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t<ListItemText primary=\"Favourites\" />\r\n\t\t\t\t\t</ListItem>\r\n\t\t\t\t</Link>\r\n\t\t\t</List>\r\n\t\t</div>\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{/* <Button onClick={toggleDrawer('left', true)}>Open Left</Button> */}\r\n\t\t\t{/* <Drawer open={state.left} onClose={toggleDrawer('left', false)}>\r\n        {sideList('left')}\r\n      </Drawer> */}\r\n\r\n\t\t\t<Button\r\n\t\t\t\tonClick={toggleDrawer(\"right\", true)}\r\n\t\t\t\tclassName={classes.menuButton}\r\n\t\t\t\tcolor=\"inherit\"\r\n\t\t\t>\r\n\t\t\t\t<MenuIcon />\r\n\t\t\t</Button>\r\n\t\t\t{/* <Button onClick={toggleDrawer(\"right\", true)}>Open Right</Button> */}\r\n\t\t\t<Drawer anchor=\"right\" open={state.right} onClose={toggleDrawer(\"right\", false)}>\r\n\t\t\t\t{sideList(\"right\")}\r\n\t\t\t</Drawer>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\n//MATERIAL UI\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\n// import Typography from '@material-ui/core/Typography';\r\n// import Switch from '@material-ui/core/Switch';\r\n// import FormControlLabel from '@material-ui/core/FormControlLabel';\r\n// import FormGroup from '@material-ui/core/FormGroup';\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\n// import MenuIcon from \"@material-ui/icons/Menu\";\r\nimport AccountCircle from \"@material-ui/icons/AccountCircle\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\n\r\n//REDUX\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n\tupdateLoginStatus,\r\n\t// logUserOut\r\n} from \"../../store/actions/loginActions\";\r\nimport { fetchCurrentUser as fetchCurrentUserAction } from \"../../store/actions/userActions\";\r\nimport { bindActionCreators } from \"redux\";\r\n\r\n//MENU OPTIONS\r\nimport Drawer from \"./Drawer\";\r\n// import Hamburger from './Hamburger';\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n\tcreateStyles({\r\n\t\troot: {\r\n\t\t\t// flexGrow: 1,\r\n\t\t},\r\n\t\tmenuButton: {\r\n\t\t\tmarginRight: theme.spacing(2),\r\n\t\t},\r\n\t\tbar: {\r\n\t\t\t// background: 'linear-gradient(45deg, #dc2b00 30%, #FF8E53 90%)',\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tjustifyContent: \"space-between\",\r\n\t\t},\r\n\t\t// title: {\r\n\t\t// \tflexGrow: 1,\r\n\t\t// },\r\n\t})\r\n);\r\n\r\nfunction Nav(props: any) {\r\n\tconst classes = useStyles();\r\n\r\n\t//state\r\n\tconst [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\r\n\tconst open = Boolean(anchorEl);\r\n\tconst {\r\n\t\tloggedIn,\r\n\t\ttoken,\r\n\t\tdetails,\r\n\t\tupdateLoginStatus,\r\n\t\t// logUserOut,\r\n\t\tfetchCurrentUser,\r\n\t\t// expired,\r\n\t\t// error,\r\n\t\tuserSuccess,\r\n\t} = props;\r\n\r\n\tconst handleMenu = (event: React.MouseEvent<HTMLElement>) => {\r\n\t\tsetAnchorEl(event.currentTarget);\r\n\t};\r\n\r\n\tconst handleClose = (e: any) => {\r\n\t\tsetAnchorEl(null);\r\n\t};\r\n\tconst handleLogOutClick = (event: any) => {\r\n\t\tevent.preventDefault();\r\n\t\thandleClose(event);\r\n\t\tlogOut();\r\n\t\t// logUserOut();\r\n\t};\r\n\tconst logOut = (): void => {\r\n\t\twindow.localStorage.removeItem(\"session_token\");\r\n\t\tupdateLoginStatus();\r\n\t};\r\n\tuseEffect(() => {\r\n\t\tupdateLoginStatus();\r\n\t\tif (loggedIn) {\r\n\t\t\tfetchCurrentUser(token);\r\n\t\t}\r\n\t}, [fetchCurrentUser, loggedIn, token, updateLoginStatus]);\r\n\t// useEffect(() => {\r\n\t// \tif (expired) {\r\n\t// \t\talert(error);\r\n\t// \t\tlogOut();\r\n\t// \t}\r\n\t// });\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<AppBar position=\"static\" style={{ margin: 0 }} color=\"secondary\">\r\n\t\t\t\t<Toolbar className={classes.bar}>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\taria-label=\"account of current user\"\r\n\t\t\t\t\t\t\taria-controls=\"menu-appbar\"\r\n\t\t\t\t\t\t\taria-haspopup=\"true\"\r\n\t\t\t\t\t\t\tonClick={handleMenu}\r\n\t\t\t\t\t\t\tcolor=\"inherit\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<AccountCircle />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t<Menu\r\n\t\t\t\t\t\t\tid=\"menu-appbar\"\r\n\t\t\t\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\t\t\t\tanchorOrigin={{\r\n\t\t\t\t\t\t\t\tvertical: \"top\",\r\n\t\t\t\t\t\t\t\thorizontal: \"right\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tkeepMounted\r\n\t\t\t\t\t\t\ttransformOrigin={{\r\n\t\t\t\t\t\t\t\tvertical: \"top\",\r\n\t\t\t\t\t\t\t\thorizontal: \"right\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\topen={open}\r\n\t\t\t\t\t\t\tonClose={handleClose}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<MenuItem onClick={loggedIn ? handleLogOutClick : handleClose}>\r\n\t\t\t\t\t\t\t\t{loggedIn ? <Link to=\"/\">Log out</Link> : <Link to=\"/login\">Log in</Link>}\r\n\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t{loggedIn ? null : (\r\n\t\t\t\t\t\t\t\t<MenuItem onClick={handleClose}>\r\n\t\t\t\t\t\t\t\t\t<Link to=\"/create\">Create Account</Link>\r\n\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</Menu>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{userSuccess ? details.name : null}\r\n\t\t\t\t\t<Drawer />\r\n\t\t\t\t\t{/* <Hamburger /> */}\r\n\t\t\t\t</Toolbar>\r\n\t\t\t</AppBar>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state: any): object => {\r\n\treturn {\r\n\t\tloggedIn: state.login.loggedIn,\r\n\t\ttoken: state.login.token,\r\n\t\tdetails: state.currentUser.details,\r\n\t\t// expired: state.currentUser.expired,\r\n\t\tuserSuccess: state.currentUser.success,\r\n\t\terror: state.currentUser.error,\r\n\t};\r\n};\r\nconst mapDispatchToProps = (dispatch: any) =>\r\n\tbindActionCreators(\r\n\t\t{\r\n\t\t\tupdateLoginStatus,\r\n\t\t\t// logUserOut,\r\n\t\t\tfetchCurrentUser: fetchCurrentUserAction,\r\n\t\t},\r\n\t\tdispatch\r\n\t);\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Nav);\r\n","//ACTION NAMES\r\nexport const CURRENT_CITY_REQUEST = \"CURRENT_CITY_REQUEST\";\r\nexport const CURRENT_CITY_SUCCESS = \"CURRENT_CITY_SUCCESS\";\r\nexport const CURRENT_CITY_ERROR = \"CURRENT_CITY_ERROR\";\r\nexport const RESET_CURRENT_CITY = \"RESET_CURRENT_CITY\";\r\n\r\n//ACTION BUILDERS\r\n\r\nexport function currentCityRequest(): object {\r\n\treturn {\r\n\t\ttype: CURRENT_CITY_REQUEST,\r\n\t};\r\n}\r\nexport function currentCitySuccess(city: object): object {\r\n\treturn {\r\n\t\ttype: CURRENT_CITY_SUCCESS,\r\n\t\tpayload: city,\r\n\t};\r\n}\r\nexport function currentCityError(error: string): object {\r\n\treturn {\r\n\t\ttype: CURRENT_CITY_ERROR,\r\n\t\tpayload: error,\r\n\t};\r\n}\r\nexport function resetCurrentCity() {\r\n\treturn {\r\n\t\ttype: RESET_CURRENT_CITY,\r\n\t};\r\n}\r\n\r\nexport function fetchCurrentCity(cityName: string) {\r\n\t//TODO: include fall back if city not found\r\n\treturn (dispatch: any) => {\r\n\t\tdispatch(currentCityRequest());\r\n\t\tfetch(`https://my-itinerary-demo.herokuapp.com/citiesAPI/${cityName}`)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (res.error) {\r\n\t\t\t\t\tthrow res.error;\r\n\t\t\t\t}\r\n\t\t\t\tdispatch(currentCitySuccess(res));\r\n\t\t\t})\r\n\t\t\t.catch(err => dispatch(currentCityError(err.message)));\r\n\t};\r\n}\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { fetchCurrentCity as fetchCurrentCityAction } from \"../../store/actions/currentCityActions\";\r\nimport { bindActionCreators } from \"redux\";\r\n\r\nfunction CityCard(props: any) {\r\n\tconst { cityName, cityImg, imgCredit, fetchCurrentCity } = props;\r\n\tconst handleClick = (e: any) => {\r\n\t\t// e.preventDefault();\r\n\t\tfetchCurrentCity(cityName);\r\n\t};\r\n\treturn (\r\n\t\t<Link\r\n\t\t\tclassName=\"city-card fade-in\"\r\n\t\t\tto={\"/itineraries/\" + cityName}\r\n\t\t\tonClick={handleClick}\r\n\t\t>\r\n\t\t\t<div className=\"city-card-inner\">\r\n\t\t\t{cityImg ? <img className=\"fade-in\" src={cityImg} alt={imgCredit} /> : null}\r\n\t\t\t\t<h4>{cityName}</h4>\r\n\t\t\t</div>\r\n\t\t</Link>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state: any): object => {\r\n\treturn {\r\n\t\tloading: state.currentCity.loading,\r\n\t\tcity: state.currentCity.cities,\r\n\t\terror: state.currentCity.error,\r\n\t};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) =>\r\n\tbindActionCreators(\r\n\t\t{\r\n\t\t\tfetchCurrentCity: fetchCurrentCityAction,\r\n\t\t},\r\n\t\tdispatch\r\n\t);\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CityCard);\r\n","import React from \"react\";\r\n// import { NavigateBefore, NavigateNext } from '@material-ui/icons';\r\nimport Button from \"@material-ui/core/Button\";\r\nimport NavigateNextIcon from \"@material-ui/icons/NavigateNext\";\r\nimport NavigateBeforeIcon from \"@material-ui/icons/NavigateBefore\";\r\n\r\nimport { createStyles, makeStyles } from \"@material-ui/core/styles\";\r\nconst useStyles = makeStyles(() =>\r\n   createStyles({\r\n      controlsContainer: {\r\n         display: \"flex\",\r\n         flexFlow: \"row wrap\",\r\n         width: \"100%\",\r\n         maxWidth: \"800px\",\r\n         justifyContent: \"center\",\r\n         alignItems: \"center\",\r\n         height: \"25px\",\r\n         padding: \"2px\",\r\n         \"& > *\": {\r\n            margin: \"0 2px\",\r\n         },\r\n         // color: \"blue\",\r\n      },\r\n      buttonControls: {\r\n\t\t\theight: \"25px\",\r\n\t\t\tpadding: 0,\r\n         \"& .MuiButton-startIcon\": {\r\n            margin: 0,\r\n         },\r\n         \"& *\": {\r\n            pointerEvents: \"none\",\r\n         },\r\n      },\r\n   })\r\n);\r\n\r\nexport default function DestinationControls(props: any) {\r\n   const classes = useStyles();\r\n   const { slideIndex, slideLength, onButtonClick, onSpanClick } = props;\r\n   const handleClick = (e: any) => {\r\n      e.preventDefault();\r\n      if (e.target.value) {\r\n         onButtonClick(e.target.value);\r\n      } else {\r\n         console.log(\"handleClick -> e.target.key\", e.target.getAttribute(\"data-index\"));\r\n         onSpanClick(parseInt(e.target.getAttribute(\"data-index\"), 10));\r\n      }\r\n   };\r\n   return (\r\n      <div className={classes.controlsContainer}>\r\n         <Button\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            onClick={handleClick}\r\n            value=\"left\"\r\n            // startIcon={<NavigateBeforeIcon />}\r\n            className={classes.buttonControls}\r\n         >\r\n            <NavigateBeforeIcon />\r\n         </Button>\r\n         {[...Array(slideLength)].map((element, index) => {\r\n            return slideIndex === index ? (\r\n               <span\r\n                  onClick={handleClick}\r\n                  key={index}\r\n                  data-index={index}\r\n                  className=\"span-dot current\"\r\n               ></span>\r\n            ) : (\r\n               <span\r\n                  onClick={handleClick}\r\n                  key={index}\r\n                  data-index={index}\r\n                  className=\"span-dot\"\r\n               ></span>\r\n            );\r\n         })}\r\n         <Button\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            onClick={handleClick}\r\n            value=\"right\"\r\n            // startIcon={<NavigateNextIcon />}\r\n            className={classes.buttonControls}\r\n         >\r\n            <NavigateNextIcon />\r\n         </Button>\r\n      </div>\r\n   );\r\n}\r\n","import React from 'react';\r\nimport { makeStyles, Theme, createStyles } from '@material-ui/core/styles';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      display: 'flex',\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      '& > * + *': {\r\n        marginLeft: theme.spacing(2),\r\n      },\r\n    },\r\n  }),\r\n);\r\n\r\ntype spinnerProps = {\r\n  height?: string;\r\n  width?: string;\r\n}\r\n\r\nconst Spinner: React.FunctionComponent<spinnerProps> = ({height, width}) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={classes.root} style={{height, width}}>\r\n      <CircularProgress />\r\n    </div>\r\n  );\r\n}\r\nexport default Spinner;","import {logUserOut} from './loginActions';\r\nexport const FETCH_CITIES_REQUEST = \"FETCH_CITIES_REQUEST\";\r\nexport const FETCH_CITIES_SUCCESS = \"FETCH_CITIES_SUCCESS\";\r\nexport const FETCH_CITIES_ERROR = \"FETCH_CITIES_ERROR\";\r\n\r\nexport function fetchCitiesRequest() {\r\n\treturn {\r\n\t\ttype: FETCH_CITIES_REQUEST,\r\n\t};\r\n}\r\n\r\nexport function fetchCitiesSuccess(cities: [any]) {\r\n\treturn {\r\n\t\ttype: FETCH_CITIES_SUCCESS,\r\n\t\tpayload: cities,\r\n\t};\r\n}\r\n\r\nexport function fetchCitiesError(error: string) {\r\n\treturn {\r\n\t\ttype: FETCH_CITIES_ERROR,\r\n\t\tpayload: error,\r\n\t};\r\n}\r\n\r\nexport const fetchTopCities = () => {\r\n\treturn (dispatch: any) => {\r\n\t\tdispatch(fetchCitiesRequest());\r\n\t\tfetch(\"https://my-itinerary-demo.herokuapp.com/citiesAPI/top\")\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(res => {\r\n\t\t\t\tdispatch(fetchCitiesSuccess(res));\r\n\t\t\t\treturn res.cities;\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tdispatch(fetchCitiesError(error.message));\r\n\t\t\t});\r\n\t};\r\n};\r\n\r\nexport const fetchAllCities = (token: string) => {\r\n\treturn (dispatch: any) => {\r\n\t\tdispatch(fetchCitiesRequest());\r\n\t\tfetch(\"https://my-itinerary-demo.herokuapp.com/citiesAPI/all\", {\r\n\t\t\tmethod: \"get\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-type\": \"application/x-www-form-urlencoded\",\r\n\t\t\t\t\"x-api-key\": token,\r\n\t\t\t},\r\n\t\t})\r\n\t\t\t.then(res => {\r\n                if (res.status === 200) return res.json();\r\n                logUserOut();\r\n\t\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tif(res.error) {\r\n\t\t\t\t    dispatch(fetchCitiesError(res.error));\r\n\t\t\t\t    throw(res.error);\r\n\t\t\t\t}\r\n\t\t\t\tdispatch(fetchCitiesSuccess(res));\r\n\t\t\t\treturn res.cities; \r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tdispatch(fetchCitiesError(error.message));\r\n\t\t\t});\r\n\t};\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport CityCard from \"../cities/CityCard\";\r\nimport DestinationControls from \"./DestinationControls\";\r\nimport Spinner from \"../global/Spinner\";\r\n\r\n//REDUX\r\nimport { bindActionCreators } from \"redux\";\r\nimport { connect } from \"react-redux\";\r\nimport { fetchTopCities as fetchTopCitiesAction } from \"../../store/actions/cityActions\";\r\n// import { default as fetchCitiesAction } from \"../../store/actions/fetchCities\";\r\n\r\n//STYLES\r\nimport { createStyles, makeStyles } from \"@material-ui/core/styles\";\r\nconst useStyles = makeStyles(() =>\r\n   createStyles({\r\n      destinationContainer: {\r\n         display: \"flex\",\r\n         flexFlow: \"column nowrap\",\r\n         justifyContent: \"space-between\",\r\n         alignItems: \"center\",\r\n         width: \"100%\",\r\n         maxWidth: 800,\r\n         minHeight: \"250px\",\r\n         \"& h3\": {\r\n            marginRight: \"auto\",\r\n         },\r\n      },\r\n      cardsContainer: {\r\n         display: \"flex\",\r\n         flexFlow: \"row wrap\",\r\n         width: \"100%\",\r\n      },\r\n   })\r\n);\r\nfunction Destinations(props: any) {\r\n   const { fetchCities, loading, cities, success } = props;\r\n   const classes = useStyles();\r\n   //STATE\r\n   const [slideLength, setSlideLength] = useState<number>(0);\r\n   const [slideIndex, setSlideIndex] = useState<number>(0);\r\n   let numPerSlide = 4; //Change this to set how many cities appear per slide\r\n   // let maxCards = 12; //Change this to set array length\r\n\r\n   //FUNCTIONS\r\n   const calcNumOfSlides = (): number => {\r\n      return Math.ceil(cities.length / numPerSlide);\r\n   };\r\n   let onButtonClick = (direction: string) => {\r\n      let index: number = slideIndex;\r\n      if (direction === \"right\") {\r\n         index = slideIndex === slideLength - 1 ? 0 : index + 1;\r\n      } else if (direction === \"left\") {\r\n         index = slideIndex === 0 ? slideLength - 1 : index - 1;\r\n      }\r\n      setSlideIndex(index);\r\n   };\r\n   const onSpanClick = (spanIndex: number): void => {\r\n      setSlideIndex(spanIndex);\r\n   };\r\n   const updateState = (): void => {\r\n      if (cities) {\r\n         setSlideLength(calcNumOfSlides());\r\n      }\r\n   };\r\n   function filterByCurrentSlide(array: [any]) {\r\n      let filteredArray = [];\r\n      let index: number = numPerSlide * slideIndex;\r\n      let length: number =\r\n         index + numPerSlide >= array.length ? array.length : index + numPerSlide;\r\n      for (let i = index; i < length; i++) {\r\n         const element = array[i];\r\n         filteredArray.push(element);\r\n      }\r\n      return filteredArray;\r\n   }\r\n   useEffect((): void => {\r\n      fetchCities();\r\n   }, [fetchCities]);\r\n   useEffect((): void => {\r\n      updateState();\r\n   });\r\n   return (\r\n      <div className={classes.destinationContainer}>\r\n         <h3>Popular MYtineraries</h3>\r\n         {loading ? <Spinner /> : null}\r\n         {success ? (\r\n            <div className={classes.cardsContainer}>\r\n               {filterByCurrentSlide(cities).map((city: any, index: number) => {\r\n                  return (\r\n                     <CityCard\r\n                        cityName={city.name}\r\n                        cityImg={city.img}\r\n                        imgCredit={city.img_credit}\r\n                        key={index}\r\n                     />\r\n                  );\r\n               })}\r\n            </div>\r\n         ) : null}\r\n         <DestinationControls\r\n            slideLength={slideLength}\r\n            slideIndex={slideIndex}\r\n            onButtonClick={onButtonClick}\r\n            onSpanClick={onSpanClick}\r\n         />\r\n      </div>\r\n   );\r\n}\r\n\r\nconst mapStateToProps = (state: any): object => {\r\n   return {\r\n      loading: state.cities.loading,\r\n      success: state.cities.success,\r\n      cities: state.cities.cities,\r\n      error: state.cities.error,\r\n   };\r\n};\r\nconst mapDispatchToProps = (dispatch: any) =>\r\n   bindActionCreators(\r\n      {\r\n         fetchCities: fetchTopCitiesAction,\r\n      },\r\n      dispatch\r\n   );\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Destinations);\r\n","import React from 'react'\r\n\r\nexport default function Header() {\r\n    return (\r\n        <header>\r\n            <h1>MYtinerary</h1>\r\n        </header>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport CircleRight from './circled-right-2.png'\r\n\r\nexport default function StartBrowsing() {\r\n    return (\r\n        <div className=\"start-browsing\">\r\n            <h2>Start Browsing</h2>\r\n            <Link to=\"/cities\"><img src={CircleRight} alt=\"&rarr;\" height=\"150px\" width=\"150px\" /></Link>\r\n        </div>\r\n    )\r\n}\r\n","import React from \"react\";\r\nimport \"./landing.scss\";\r\nimport Destinations from './Destinations';\r\n\r\nimport Header from \"./Header\";\r\nimport StartBrowsing from \"./StartBrowsing\";\r\n\r\nexport default function Landing() {\r\n\treturn (\r\n\t\t<div className=\"landing-container\">\r\n\t\t\t<Header />\r\n\t\t\t<div className=\"content-wrapper\">\r\n\t\t\t\t<p>Find your perfect trip, designed by insiders who know and love their cities.</p>\r\n\t\t\t\t<StartBrowsing />\r\n\t\t\t\t<Destinations />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from \"react\";\r\nimport InputBase from \"@material-ui/core/InputBase\";\r\nimport { createStyles, fade, Theme, makeStyles } from \"@material-ui/core/styles\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n\tcreateStyles({\r\n\t\troot: {\r\n\t\t\tflexGrow: 1,\r\n\t\t},\r\n\t\tsearch: {\r\n\t\t\tposition: \"relative\",\r\n\t\t\tborderRadius: theme.shape.borderRadius,\r\n\t\t\tbackgroundColor: fade(theme.palette.common.white, 0.15),\r\n\t\t\t\"&:hover\": {\r\n\t\t\t\tbackgroundColor: fade(theme.palette.common.white, 0.25),\r\n\t\t\t},\r\n\t\t\tmarginLeft: 0,\r\n\t\t\twidth: \"100%\",\r\n\t\t\t[theme.breakpoints.up(\"sm\")]: {\r\n\t\t\t\tmarginLeft: theme.spacing(1),\r\n\t\t\t\twidth: \"auto\",\r\n\t\t\t},\r\n\t\t},\r\n\t\tsearchIcon: {\r\n\t\t\twidth: theme.spacing(7),\r\n\t\t\theight: \"100%\",\r\n\t\t\tposition: \"absolute\",\r\n\t\t\tpointerEvents: \"none\",\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\tjustifyContent: \"center\",\r\n\t\t},\r\n\t\tinputRoot: {\r\n\t\t\tcolor: \"inherit\",\r\n\t\t},\r\n\t\tinputInput: {\r\n\t\t\tpadding: theme.spacing(1, 1, 1, 7),\r\n\t\t\ttransition: theme.transitions.create(\"width\"),\r\n\t\t\twidth: \"100%\",\r\n\t\t\t[theme.breakpoints.up(\"sm\")]: {\r\n\t\t\t\twidth: 120,\r\n\t\t\t\t\"&:focus\": {\r\n\t\t\t\t\twidth: 200,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t})\r\n);\r\n\r\nexport default function Search(props: any) {\r\n\tconst classes = useStyles();\r\n    const { value, onChange } = props;\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<div className={classes.search}>\r\n\t\t\t\t<div className={classes.searchIcon}>\r\n\t\t\t\t\t<SearchIcon />\r\n\t\t\t\t</div>\r\n\t\t\t\t<InputBase\r\n                    value={value}\r\n                    onChange={onChange}\r\n\t\t\t\t\tplaceholder=\"Search\"\r\n\t\t\t\t\tclasses={{\r\n\t\t\t\t\t\troot: classes.inputRoot,\r\n\t\t\t\t\t\tinput: classes.inputInput,\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tinputProps={{ \"aria-label\": \"search\" }}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import \"./cities.scss\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport CityCard from \"./CityCard\";\r\nimport Spinner from \"../global/Spinner\";\r\nimport Search from \"../global/Search\";\r\n\r\n//REDUX\r\nimport { bindActionCreators } from \"redux\";\r\nimport { connect } from \"react-redux\";\r\nimport { fetchAllCities as fetchAllCitiesAction } from \"../../store/actions/cityActions\";\r\n\r\nconst Cities = (props: any) => {\r\n\tconst { cities, fetchAllCities, loading, token, hasLoaded, loggedIn,  } = props;\r\n\tconst [searchStr, setSearchStr] = useState(\"\");\r\n\tuseEffect((): void => {\r\n\t\tif (loggedIn) {\r\n\t\t\tfetchAllCities(token);\r\n\t\t}\r\n\t}, [fetchAllCities, token, loggedIn]);\r\n\tconst handleChange = (e: any) => {\r\n\t\te.preventDefault();\r\n\t\tsetSearchStr(e.target.value);\r\n\t};\r\n\tfunction filterCities(): any {\r\n\t\tif (searchStr.length) {\r\n\t\t\tlet filtered = [];\r\n\t\t\tfor (const city of cities) {\r\n\t\t\t\tif (city.name.toLowerCase().search(searchStr.toLowerCase()) === 0) {\r\n\t\t\t\t\t//Change to includes if want less strict search\r\n\t\t\t\t\tfiltered.push(city);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn filtered;\r\n\t\t}\r\n\t\treturn cities;\r\n\t} \r\n\treturn (\r\n\t\t<div className=\"cities-container\">\r\n\t\t\t<h1>Cities</h1>\r\n\t\t\t<Search className=\"city-search\" value={searchStr} onChange={handleChange} />\r\n\t\t\t{loading ? <Spinner /> : null}\r\n\t\t\t{hasLoaded ? (\r\n\t\t\t\t<div className=\"cards-container\">\r\n\t\t\t\t\t{filterCities().map((city: any, index: number) => (\r\n\t\t\t\t\t\t<CityCard\r\n\t\t\t\t\t\t\t// className=\"city-card\"\r\n\t\t\t\t\t\t\tcityName={city.name}\r\n\t\t\t\t\t\t\tcityImg={city.img}\r\n\t\t\t\t\t\t\timgCredit={city.img_credit}\r\n\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t) : null}\r\n\t\t</div>\r\n\t);\r\n};\r\nconst mapStateToProps = (state: any): object => {\r\n\treturn {\r\n\t\t//Cities\r\n\t\tloading: state.cities.loading,\r\n\t\thasLoaded: state.cities.success,\r\n\t\tcities: state.cities.cities,\r\n\t\terror: state.cities.error,\r\n\t\t//login\r\n\t\tloginPending: state.login.pending,\r\n\t\ttoken: state.login.token,\r\n\t\tloggedIn: state.login.loggedIn\r\n\t};\r\n};\r\nconst mapDispatchToProps = (dispatch: any) =>\r\n\tbindActionCreators(\r\n\t\t{\r\n\t\t\tfetchAllCities: fetchAllCitiesAction,\r\n\t\t},\r\n\t\tdispatch\r\n\t);\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Cities);\r\n","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport { Link } from \"react-router-dom\";\r\ninterface State {\r\n   open: boolean;\r\n   handlePopLogin: any;\r\n}\r\n\r\nconst AlertDialog: React.FunctionComponent<State> = ({ open, handlePopLogin }) => {\r\n\t// const [open, setOpen] = React.useState(false);\r\n\r\n\t// const handleClickOpen = () => {\r\n\t// \thandlePopLogin(true);\r\n\t// };\r\n\r\n\tconst handleClose = () => {\r\n\t\thandlePopLogin(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{/* <Button variant=\"outlined\" color=\"primary\" onClick={handleClickOpen}>\r\n\t\t\t\tOpen alert dialog\r\n\t\t\t</Button> */}\r\n\t\t\t<Dialog\r\n\t\t\t\topen={open}\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t\taria-labelledby=\"alert-dialog-title\"\r\n\t\t\t\taria-describedby=\"alert-dialog-description\"\r\n\t\t\t>\r\n\t\t\t\t<DialogTitle id=\"alert-dialog-title\">{\"Enjoy more of MyIntinerary\"}</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<DialogContentText id=\"alert-dialog-description\">\r\n\t\t\t\t\t\tYou need an account for the full MyIntinerary experience.\r\n\t\t\t\t\t</DialogContentText>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Link to=\"/login\">\r\n\t\t\t\t\t\t<Button onClick={handleClose} color=\"primary\">\r\n\t\t\t\t\t\t\tLogin\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t<Link to=\"/create\">\r\n\t\t\t\t\t\t<Button onClick={handleClose} color=\"primary\" autoFocus>\r\n\t\t\t\t\t\t\tCreate account\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\nexport default AlertDialog","import React, { useState, useEffect, FunctionComponent } from \"react\";\r\nimport { makeStyles, Avatar } from \"@material-ui/core\";\r\nimport Spinner from \"../global/Spinner\";\r\n\r\ntype authorAvatarProps = {\r\n\tauthorId: string;\r\n\tvariant: string;\r\n};\r\n\r\nconst useStyles = makeStyles({\r\n\troot: {\r\n\t\tmaxWidth: \"800px\",\r\n\t\tmargin: \"8px auto\",\r\n\t\t\"& header\": {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexFlow: \"row wrap\",\r\n\t\t},\r\n\t\ttextOverflow: \"ellipsis\",\r\n\t},\r\n\tavatarContainer: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexFlow: \"column nowrap\",\r\n\t\tjustifyContent: \"center\",\r\n\t\talignItems: \"center\",\r\n\t\tpadding: \"0.2rem\",\r\n\t\tmargin: \"0 1rem\",\r\n\t\twidth: \"130px\",\r\n\t},\r\n});\r\n\r\nconst AuthorAvatar: FunctionComponent<authorAvatarProps> = ({\r\n\tauthorId,\r\n\tvariant = \"\",\r\n}) => {\r\n\tconst classes = useStyles();\r\n\t//STATE:\r\n\tconst authorInitialState = { itineraries: [], _id: \"\", name: \"\", img: \"\" };\r\n\tconst [author, setAuthor] = useState(authorInitialState);\r\n\tconst [authorLoading, setAuthorLoading] = useState(true);\r\n\tconst fetchAuthor = () => {\r\n\t\tsetAuthorLoading(true);\r\n\t\tfetch(`https://my-itinerary-demo.herokuapp.com/authorsAPI/${authorId}`)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(res => {\r\n\t\t\t\tsetAuthor(res);\r\n\t\t\t\tsetAuthorLoading(false);\r\n\t\t\t})\r\n\t\t\t.catch(err => console.error(err));\r\n\t};\r\n\tuseEffect(() => {\r\n\t\tfetchAuthor();\r\n\t\treturn () => {\r\n\t\t\tsetAuthor(authorInitialState);\r\n\t\t};\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, []);\r\n\tswitch (variant) {\r\n\t\tcase \"named\":\r\n\t\t\treturn (\r\n\t\t\t\t<div className={classes.avatarContainer}>\r\n\t\t\t\t\t<Avatar alt={author.name} src=\"\" />\r\n\t\t\t\t\t{authorLoading ? <Spinner /> : <p>{author.name}</p>}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\tdefault:\r\n\t\t\treturn <Avatar alt={author.name} src=\"\" />;\r\n\t}\r\n};\r\nexport default AuthorAvatar;\r\n\r\n//NOTE THIS MAY NEED TO BE UPDATED TO USERS IN UPCOMING UPDATES","import React, { FunctionComponent, useEffect, useState } from \"react\";\r\nimport PopLogin from '../global/PopLogin';\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport AuthorAvatar from \"../author/AuthorAvatar\";\r\nimport FavoriteIcon from \"@material-ui/icons/Favorite\";\r\nimport FavoriteBorderIcon from \"@material-ui/icons/FavoriteBorder\";\r\nimport { connect } from \"react-redux\";\r\n\r\ntype itineraryProps = {\r\n\titinerary: any;\r\n\tid: string;\r\n\tfavourites: any;\r\n\ttoken: string;\r\n\tloggedIn: boolean;\r\n};\r\n\r\nconst useStyles = makeStyles({\r\n\theader: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexFlow: \"row wrap\",\r\n\t},\r\n\tdetails: {\r\n\t\tflex: \"1 0 auto\",\r\n\t\tdisplay: \"flex\",\r\n\t\tflexFlow: \"column nowrap\",\r\n\t\tjustifyContent: \"flex-start\",\r\n\t\tpadding: \"0.2rem\",\r\n\t\t\"h1, h2, h3, h4\": {\r\n\t\t\tpadding: 0,\r\n\t\t},\r\n\t},\r\n\tstats: {\r\n\t\tdisplay: \"flex\",\r\n\t\t\"& p\": {\r\n\t\t\tmargin: \"0 0.5em\",\r\n\t\t},\r\n\t},\r\n\tcostIndex: {\r\n\t\tfontWeight: 500,\r\n\t\tfontSize: \"1.1em\",\r\n\t},\r\n\ttags: {\r\n\t\t\"& span\": {\r\n\t\t\tmargin: \"0 0.5em\",\r\n\t\t},\r\n\t},\r\n\tinput: {\r\n\t\tdisplay: \"none\",\r\n\t},\r\n\t'label:disabled+label heart': {\r\n\t\tcolor: '#ccc'\r\n\t},\r\n\theart: {\r\n\t\tmargin: \"15px\",\r\n\t\tcolor: \"#dc2b00\",\r\n\t\t\"&:hover\": {\r\n\t\t\tcursor: \"pointer\",\r\n\t\t\ttransform: \"scale(1.1)\",\r\n\t\t},\r\n\t},\r\n});\r\n\r\nconst ItineraryCardHeader: FunctionComponent<itineraryProps> = ({\r\n\titinerary,\r\n\tid,\r\n\tfavourites,\r\n\ttoken,\r\n\tloggedIn,\r\n}): any => {\r\n\tconst classes = useStyles();\r\n\r\n\tconst calcDuration = (duration: number): string | undefined => {\r\n\t\tif (duration >= 60) {\r\n\t\t\treturn `${duration / 60} hours`;\r\n\t\t} else if (duration > 0) {\r\n\t\t\treturn `${duration} minutes`;\r\n\t\t} else {\r\n\t\t\treturn \"--\";\r\n\t\t}\r\n\t};\r\n\tconst [isFav, setIsFav] = useState(false);\r\n\tconst onHeartChange = () => {\r\n\t\tlet action = \"\";\r\n\t\tisFav ? (action = \"del\") : (action = \"add\");\r\n\t\tupdateFavourites(action, itinerary._id, token);\r\n\t};\r\n\tuseEffect(() => {\r\n\t\tif (loggedIn && favourites.length) {\r\n\t\t\tif (favourites.includes(itinerary._id)) {\r\n\t\t\t\tsetIsFav(true);\r\n\t\t\t} else {\r\n\t\t\t\tsetIsFav(false);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tsetIsFav(false);\r\n\t\t}\r\n\t}, [loggedIn, favourites, itinerary._id]);\r\n\tconst updateFavourites = (action: string, itinId: string, token: string) => {\r\n\t\tfetch(`https://my-itinerary-demo.herokuapp.com/usersAPI/${action}/fav`, {\r\n\t\t\tmethod: \"put\",\r\n\t\t\theaders: {\r\n\t\t\t\tAccept: \"application/json, text/plain, */*\",\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t\"x-api-key\": token,\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({ fav: itinId }),\r\n\t\t})\r\n\t\t\t.then((res: any) => res.json())\r\n\t\t\t.then((res: any) => {\r\n\t\t\t\tif (res.success) {\r\n\t\t\t\t\tsetIsFav(!isFav);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\tconst [popLogIn, setPopLogIn] = useState(false);\r\n\tconst handlePopLogin = () => {\r\n\t\tif(!loggedIn) {\r\n\t\t\tsetPopLogIn(!popLogIn);\r\n\t\t}\r\n\t}\r\n\treturn (\r\n\t\t<header className={classes.header}>\r\n\t\t\t<AuthorAvatar authorId={itinerary.author_id} variant=\"named\" />\r\n\t\t\t<div className={classes.details}>\r\n\t\t\t\t<h3>{itinerary.title}</h3>\r\n\t\t\t\t<div className={classes.stats}>\r\n\t\t\t\t\t<p>Likes: {itinerary.likes}</p>\r\n\t\t\t\t\t<p>{calcDuration(itinerary.duration)}</p>\r\n\t\t\t\t\t<p className={classes.costIndex}>\r\n\t\t\t\t\t\t{[...Array(itinerary.cost_rating)].map((cost, index: number) => (\r\n\t\t\t\t\t\t\t<span key={index}>$</span>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p className={classes.tags}>\r\n\t\t\t\t\t{itinerary.tags.map((tag: string, index: number) => (\r\n\t\t\t\t\t\t<span key={index}>#{tag} </span>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\r\n\t\t\t<input\r\n\t\t\t\tclassName={classes.input}\r\n\t\t\t\tid={`icon-heart-${id}`}\r\n\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\tchecked={isFav}\r\n\t\t\t\tonChange={onHeartChange}\r\n\t\t\t\tdisabled={!loggedIn}\r\n\t\t\t/>\r\n\t\t\t<label htmlFor={`icon-heart-${id}`} onClick={handlePopLogin}>\r\n\t\t\t\t{isFav ? (\r\n\t\t\t\t\t<FavoriteIcon className={classes.heart} />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<FavoriteBorderIcon className={classes.heart} />\r\n\t\t\t\t)}\r\n\t\t\t\t<PopLogin open={popLogIn} handlePopLogin={handlePopLogin} />\r\n\t\t\t</label>\r\n\t\t</header>\r\n\t);\r\n};\r\n\r\nconst mapStateToProps = (state: any) => {\r\n\treturn {\r\n\t\tfavourites: state.currentUser.details.favourites,\r\n\t\ttoken: state.login.token,\r\n\t\tloggedIn: state.login.loggedIn\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps)(ItineraryCardHeader);\r\n","import React from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n\tcreateStyles({\r\n\t\troot: {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\talignItems: \"center\",\r\n\t\t},\r\n\t\twrapper: {\r\n\t\t\tmargin: theme.spacing(1),\r\n\t\t\tposition: \"relative\",\r\n\t\t},\r\n\t\tbuttonSuccess: {\r\n\t\t\tbackgroundColor: green[500],\r\n\t\t\t\"&:hover\": {\r\n\t\t\t\tbackgroundColor: green[700],\r\n\t\t\t},\r\n\t\t},\r\n\t\tbuttonProgress: {\r\n\t\t\tcolor: green[500],\r\n\t\t\tposition: \"absolute\",\r\n\t\t\ttop: \"50%\",\r\n\t\t\tleft: \"50%\",\r\n\t\t\tmarginTop: -12,\r\n\t\t\tmarginLeft: -12,\r\n\t\t},\r\n\t})\r\n);\r\n\r\ntype SubmitButtonProps = {\r\n\ttext?: string;\r\n\tsuccessText?: string;\r\n\tloading?: boolean;\r\n\tsuccess?: boolean | null;\r\n};\r\n\r\nconst SubmitButton: React.FunctionComponent<SubmitButtonProps> = ({\r\n\ttext,\r\n\tsuccessText,\r\n\tloading,\r\n\tsuccess,\r\n}) => {\r\n\tconst classes = useStyles();\r\n\r\n\tconst buttonClassname = clsx({\r\n\t\t[classes.buttonSuccess]: success,\r\n\t});\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<div className={classes.wrapper}>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tclassName={buttonClassname}\r\n\t\t\t\t\tdisabled={loading}\r\n\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{success ? successText || \"Success!\" : text || \"Submit\"}\r\n\t\t\t\t</Button>\r\n\t\t\t\t{loading && <CircularProgress size={24} className={classes.buttonProgress} />}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\nexport default SubmitButton;\r\n","import React from \"react\";\r\nimport SubmitButton from \"../../global/SubmitButton\";\r\nimport { connect } from \"react-redux\";\r\nimport { TextField, makeStyles, FormControl, FormHelperText } from \"@material-ui/core\";\r\n//STYLES:\r\nconst useStyles = makeStyles({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"space-between\",\r\n\t\tpadding: \"0.1em 0.5em\",\r\n\t},\r\n\ttext: {\r\n\t\tflex: 1,\r\n\t},\r\n});\r\n\r\n//TS:\r\ninterface Values {\r\n\ttext: string;\r\n}\r\n\r\nfunction CommentForm(props: any) {\r\n\tconst classes = useStyles();\r\n   //State & props\r\n   const { itinId, token, userName, updateCommentArray } = props;\r\n\tconst [values, setValues] = React.useState<Values>({\r\n\t\ttext: \"\",\r\n\t});\r\n\tconst [errors, setErrors] = React.useState<Values>({\r\n\t\ttext: \"\",\r\n   });\r\n   const [success, setSuccess] = React.useState<boolean | null>(null)\r\n   const [pending, setPending] = React.useState(false)\r\n\t//Func\r\n\tconst handleChange = (prop: keyof Values) => (\r\n\t\tevent: React.ChangeEvent<HTMLInputElement>\r\n\t) => {\r\n\t\tsetValues({ ...values, [prop]: event.target.value });\r\n\t\tsetErrors({ ...errors, [prop]: \"\" });\r\n\t};\r\n\tconst handleSubmit = (event: React.SyntheticEvent) => {\r\n\t\tevent.preventDefault();\r\n\t\tif (values.text.length) {\r\n         setPending(true);\r\n         postComment()\r\n            .then(res => {\r\n               if (res.success) {\r\n                  console.log(res.msg);\r\n                  setSuccess(true);\r\n                  setValues({...values, text: \"\"});\r\n                  \r\n                  updateCommentArray(\"add\", res.comment);\r\n               } else {\r\n                  setErrors({...errors, text: res.msg});\r\n                  setSuccess(false);\r\n               }\r\n               setPending(false);\r\n            })\r\n\t\t} else {\r\n\t\t\tsetErrors({ ...values, text: \"Cannot be blank\" });\r\n\t\t}\r\n   };\r\n   async function postComment() {\r\n      let response = await fetch(\"https://my-itinerary-demo.herokuapp.com/commentsAPI/post\", {\r\n\t\t\t   method: \"post\",\r\n\t\t\t   headers: {\r\n               Accept: \"application/json, text/plain, */*\",\r\n               \"Content-Type\": \"application/json\",\r\n               \"x-api-key\": token,\r\n            },\r\n            body: JSON.stringify({\r\n               itin: itinId,\r\n               author: userName,\r\n               text: values.text,\r\n            })\r\n         });\r\n      return await response.json();\r\n   }\r\n\t//Render\r\n\treturn (\r\n\t\t<form className={classes.root} onSubmit={handleSubmit}>\r\n\t\t\t<FormControl className={classes.text}>\r\n\t\t\t\t<TextField\r\n               onChange={handleChange(\"text\")}\r\n               value={values.text}\r\n\t\t\t\t\tplaceholder=\"Your comment...\"\r\n\t\t\t\t\tmultiline\r\n\t\t\t\t\trows={1}\r\n\t\t\t\t\trowsMax={4}\r\n\t\t\t\t\terror={errors.text.length ? true : false}\r\n\t\t\t\t/>\r\n\t\t\t\t<FormHelperText id=\"text-helper-text\">\r\n\t\t\t\t\t{errors.text.length ? errors.text : null}\r\n\t\t\t\t</FormHelperText>\r\n\t\t\t</FormControl>\r\n\t\t\t{/* <input type=\"text\" onChange={handleChange(\"text\")} placeholder=\"Your comment...\" /> */}\r\n\t\t\t<SubmitButton loading={pending} success={success} />\r\n\t\t</form>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state: any) => {\r\n   return {\r\n      token: state.login.token,\r\n      userName: state.currentUser.details.name\r\n   }\r\n}\r\n\r\nexport default connect(mapStateToProps)(CommentForm);\r\n","import React from \"react\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\r\n\r\nconst ITEM_HEIGHT = 48;\r\n\r\nfunction CommentMenu(props: any) {\r\n\tconst { deleteComment } = props;\r\n\tconst [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\r\n\tconst open = Boolean(anchorEl);\r\n\r\n\tconst handleClick = (event: React.MouseEvent<HTMLElement>) => {\r\n\t\tsetAnchorEl(event.currentTarget);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetAnchorEl(null);\r\n\t};\r\n\tconst handleDelete = (event: any) => {\r\n\t\tdeleteComment(event);\r\n\t\thandleClose();\r\n\t};\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<IconButton\r\n\t\t\t\taria-label=\"more\"\r\n\t\t\t\taria-controls=\"long-menu\"\r\n\t\t\t\taria-haspopup=\"true\"\r\n\t\t\t\tonClick={handleClick}\r\n\t\t\t>\r\n\t\t\t\t<MoreVertIcon />\r\n\t\t\t</IconButton>\r\n\t\t\t<Menu\r\n\t\t\t\tid=\"long-menu\"\r\n\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\tkeepMounted\r\n\t\t\t\topen={open}\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t\tPaperProps={{\r\n\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\tmaxHeight: ITEM_HEIGHT * 4.5,\r\n\t\t\t\t\t\twidth: 200,\r\n\t\t\t\t\t},\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<MenuItem key=\"delete\" onClick={handleDelete}>\r\n\t\t\t\t\tDelete\r\n\t\t\t\t</MenuItem>\r\n\t\t\t</Menu>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default CommentMenu;\r\n","import React, { FunctionComponent } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport CommentMenu from \"./CommentMenu\";\r\n\r\n//MATERIAL-UI\r\nimport { makeStyles, createStyles, Theme, Typography } from \"@material-ui/core\";\r\n\r\nconst useStyle = makeStyles((theme: Theme) =>\r\n\tcreateStyles({\r\n\t\troot: {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexFlow: \"row wrap\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\t\"& > *\": {\r\n\t\t\t\tmargin: theme.spacing(1),\r\n\t\t\t},\r\n\t\t},\r\n\t\ttext: {\r\n\t\t\tbackgroundColor: \"#f2f3f5\",\r\n\t\t\tborderRadius: \"18px\",\r\n\t\t\tboxSizing: \"border-box\",\r\n\t\t\t// color: \"#1c1e21\",\r\n\t\t\tdisplay: \"inline-block\",\r\n\t\t\tlineHeight: \"16px\",\r\n\t\t\tmargin: \"auto 0\",\r\n\t\t\tpadding: \" 0.6em\",\r\n\t\t\tmaxWidth: \"100%\",\r\n\t\t\twordWrap: \"break-word\",\r\n\t\t\tposition: \"relative\",\r\n\t\t\twhiteSpace: \"normal\",\r\n\t\t\twordBreak: \"break-word\",\r\n\t\t},\r\n\t\tauthor: {\r\n\t\t\tcolor: theme.palette.primary.main,\r\n\t\t},\r\n\t\tdate: {\r\n\t\t\tfontSize: \"0.9em\"\r\n\t\t}\r\n\t})\r\n);\r\n\r\ntype commentProps = {\r\n\tcomment: any;\r\n\ttoken: string;\r\n\tupdateCommentArray: any;\r\n};\r\n\r\nconst Comment: FunctionComponent<commentProps> = ({\r\n\tcomment,\r\n\ttoken,\r\n\tupdateCommentArray,\r\n}) => {\r\n\tconst classes = useStyle();\r\n\r\n\t// const [author, setAuthor] = React.useState<any>({\r\n\t// \t// authorAvatar: ,\r\n\t// \tuserIsAuthor: false,\r\n\r\n\t// })\r\n\t//State\r\n\tconst [userIsAuthor, setUserIsAuthor] = React.useState(false);\r\n\r\n\tReact.useEffect(() => {\r\n\t\tconst checkUserPrivileges = async () => {\r\n\t\t\tlet response = await fetch(\"https://my-itinerary-demo.herokuapp.com/usersAPI/validate\", {\r\n\t\t\t\tmethod: \"post\",\r\n\t\t\t\theaders: {\r\n\t\t\t\t\tAccept: \"application/json, text/plain, */*\",\r\n\t\t\t\t\t\"content-Type\": \"application/json\",\r\n\t\t\t\t\t\"x-api-key\": token,\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\tid: comment.author.id,\r\n\t\t\t\t}),\r\n\t\t\t});\r\n\t\t\treturn await response.json();\r\n\t\t};\r\n\t\tcheckUserPrivileges().then(res => {\r\n\t\t\tif (res.success) {\r\n\t\t\t\tsetUserIsAuthor(true);\r\n\t\t\t} else setUserIsAuthor(false);\r\n\t\t});\r\n\t\treturn () => {\r\n\t\t\t// setUserIsAuthor(false);\r\n\t\t};\r\n\t}, [comment.author.id, token]);\r\n\r\n\tconst deleteComment = (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\r\n\t\tevent.preventDefault();\r\n\t\tlet api = \"https://my-itinerary-demo.herokuapp.com/commentsAPI/delete\";\r\n\t\tfetch(api, {\r\n\t\t\tmethod: \"delete\",\r\n\t\t\theaders: {\r\n\t\t\t\tAccept: \"application/json, text/plain, */*\",\r\n\t\t\t\t\"content-Type\": \"application/json\",\r\n\t\t\t\t\"x-api-key\": token,\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tid: comment._id,\r\n\t\t\t}),\r\n\t\t})\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (res.success) {\r\n\t\t\t\t\t// setUserIsAuthor(false);\r\n\t\t\t\t\tupdateCommentArray(\"delete\", res.id);\r\n\t\t\t\t\t// checkUserPrivileges();\r\n\t\t\t\t} else console.log(res);\r\n\t\t\t});\r\n\t};\r\n\tconst dateComparison = (date: number) => {\r\n\t\tlet current = Date.now();\r\n\t\tlet difference = current - date;\r\n\t\tlet diffHours = Math.floor(difference /(1000 * 60 * 60) % 60);\r\n\t\tif (diffHours >= 24) {\r\n\t\t\tlet days = Math.floor(diffHours / 24);\r\n\t\t\tif (days >= 7){\r\n\t\t\t\treturn Math.floor(days / 7) + \"w\"\r\n\t\t\t}\r\n\t\t\treturn Math.floor(diffHours / 24) + \"d\"\r\n\t\t} else if(diffHours < 1) {\r\n\t\t\treturn Math.floor(difference / (1000 * 60) % 60) + \"m\"\r\n\t\t}\r\n\t\treturn diffHours + \"h\";\r\n\t}\r\n\treturn (\r\n\t\t<div className={classes.root + \" fade-in\"}>\r\n\t\t\t{/* <h4>{comment.title}</h4> */}\r\n\t\t\t<Typography className={classes.text}>\r\n\t\t\t\t<span className={classes.author}>{comment.author.name}</span> {comment.text}\r\n\t\t\t</Typography>\r\n\t\t\t<p className={classes.date}>{dateComparison(comment.posted)}</p>\r\n\t\t\t{/* {userIsAuthor ? <Button onClick={deleteComment}>X</Button> : null} */}\r\n\t\t\t{userIsAuthor ? <CommentMenu deleteComment={deleteComment} /> : null}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst mapStateToProps = (state: any) => {\r\n\treturn {\r\n\t\ttoken: state.login.token,\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps)(Comment);\r\n","import React, { useReducer, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport CommentForm from \"./CommentForm\";\r\nimport Comment from \"./Comment\";\r\n\r\n//REDUX\r\nimport { connect } from \"react-redux\";\r\nimport Spinner from \"../../global/Spinner\";\r\n\r\n//MATERIAL-UI\r\nimport { Button, makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n\tcreateStyles({\r\n\t\troot: {\r\n\t\t\t\"& > *\": {\r\n\t\t\t\tmargin: theme.spacing(1),\r\n\t\t\t},\r\n\t\t},\r\n\t\tloader: {\r\n\t\t\tdisplay: \"block\",\r\n\t\t},\r\n\t})\r\n);\r\n//TS STATE:\r\ntype State = {\r\n\tpending: boolean;\r\n\tsuccess: boolean | null;\r\n\tdata: any;\r\n\tpage: number;\r\n\tcount: number;\r\n};\r\nconst initialState: State = {\r\n\tpending: true,\r\n\tsuccess: null,\r\n\tdata: [],\r\n\tpage: 0,\r\n\tcount: 0,\r\n};\r\n//TYPES\r\nconst PENDING = \"PENDING\";\r\nconst SUCCESS = \"SUCCESS\";\r\nconst FAIL = \"FAIL\";\r\nconst UPDATE_DATA = \"UPDATE_DATA\";\r\nconst INCREMENT_PAGE_COUNT = \"INCREMENT_PAGE_COUNT\";\r\nconst RESET_PAGE_COUNT = \"RESET_PAGE_COUNT\";\r\n//ACTIONS + REDUCER\r\nconst pendingAction = () => {\r\n\treturn {\r\n\t\ttype: PENDING,\r\n\t};\r\n};\r\nconst successAction = (payload: any) => {\r\n\treturn {\r\n\t\ttype: SUCCESS,\r\n\t\tpayload,\r\n\t};\r\n};\r\nconst failAction = () => {\r\n\treturn {\r\n\t\ttype: FAIL,\r\n\t};\r\n};\r\nconst updateAction = (command: string, payload: any) => {\r\n\treturn {\r\n\t\ttype: UPDATE_DATA,\r\n\t\tcommand,\r\n\t\tpayload,\r\n\t};\r\n};\r\nconst changePageAction = (command: string) => {\r\n\tif (command === \"more\") {\r\n\t\treturn {\r\n\t\t\ttype: INCREMENT_PAGE_COUNT,\r\n\t\t};\r\n\t} else if (command === \"less\") {\r\n\t\treturn {\r\n\t\t\ttype: RESET_PAGE_COUNT,\r\n\t\t};\r\n\t}\r\n};\r\n\r\nfunction reducer(state: any, action: any) {\r\n\tswitch (action.type) {\r\n\t\tcase PENDING:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpending: true,\r\n\t\t\t};\r\n\t\tcase SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpending: false,\r\n\t\t\t\tsuccess: true,\r\n\t\t\t\tdata: action.payload.comments,\r\n\t\t\t\tcount: action.payload.count,\r\n\t\t\t};\r\n\t\tcase FAIL:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpending: false,\r\n\t\t\t\tsuccess: false,\r\n\t\t\t\tdata: [],\r\n\t\t\t\tcount: 0,\r\n\t\t\t};\r\n\t\tcase UPDATE_DATA:\r\n\t\t\tif (action.command === \"add\") {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tcount: state.count + 1,\r\n\t\t\t\t\tdata: [action.payload, ...state.data],\r\n\t\t\t\t};\r\n\t\t\t} else if (action.command === \"delete\") {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tcount: state.count - 1,\r\n\t\t\t\t\tdata: [\r\n\t\t\t\t\t\t...state.data.filter((comment: any) => {\r\n\t\t\t\t\t\t\treturn comment._id !== action.payload;\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t],\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn { ...state };\r\n\t\tcase INCREMENT_PAGE_COUNT:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpage: state.page + 1,\r\n\t\t\t};\r\n\t\tcase RESET_PAGE_COUNT:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpage: 0,\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\tthrow new Error();\r\n\t}\r\n}\r\nfunction Comments(props: any) {\r\n\tconst classes = useStyles();\r\n\tconst { loggedIn, itinId } = props;\r\n\r\n\tconst [comments, dispatch] = useReducer(reducer, initialState);\r\n\r\n\tuseEffect(() => {\r\n\t\tfunction getFetchUrl() {\r\n\t\t\treturn `https://my-itinerary-demo.herokuapp.com/commentsAPI/${itinId}/${comments.page}`;\r\n\t\t}\r\n\t\tasync function fetchComments() {\r\n\t\t\tdispatch(pendingAction());\r\n\t\t\tlet response = await fetch(getFetchUrl()).then(res => res.json());\r\n\t\t\tlet res = await response;\r\n\t\t\tif (res.success) {\r\n\t\t\t\tdispatch(successAction({ comments: res.comments, count: res.count }));\r\n\t\t\t} else if (!res.success) {\r\n\t\t\t\tdispatch(failAction());\r\n\t\t\t}\r\n\t\t}\r\n\t\tfetchComments();\r\n\t}, [comments.page, itinId]);\r\n\r\n\tconst updateCommentArray = (command: string, data: string | object) => {\r\n\t\t//Removes or adds to array without need of re-render.\r\n\t\tdispatch(updateAction(command, data));\r\n\t};\r\n\tconst loadComments = (command: string) => (\r\n\t\tevent: React.MouseEvent<HTMLButtonElement, MouseEvent>\r\n\t): void => {\r\n\t\t//increases load amount dep on page, or resets page to 0\r\n\t\tevent.preventDefault();\r\n\t\tdispatch(changePageAction(command));\r\n\t};\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<h4>Comments:</h4>\r\n\t\t\t{loggedIn ? (\r\n\t\t\t\t<CommentForm itinId={itinId} updateCommentArray={updateCommentArray} />\r\n\t\t\t) : (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Link to=\"/login\">Log in to leave a comment</Link>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t\t{comments.pending ? <Spinner /> : null}\r\n\t\t\t{comments.data.length\r\n\t\t\t\t? comments.data.map((comment: any) => (\r\n\t\t\t\t\t\t<Comment\r\n\t\t\t\t\t\t\tkey={comment._id}\r\n\t\t\t\t\t\t\tcomment={comment}\r\n\t\t\t\t\t\t\tupdateCommentArray={updateCommentArray}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t  ))\r\n\t\t\t\t: null}\r\n\t\t\t{comments.data.length  ? null : (\r\n\t\t\t\t<p>No comments yet. Be the first and leave a comment!</p>\r\n\t\t\t)}\r\n\t\t\t{comments.count > comments.data.length && comments.data.length !== 0 ? (\r\n\t\t\t\t<Button className={classes.loader} color=\"secondary\" onClick={loadComments(\"more\")}>\r\n\t\t\t\t\tLoad more...\r\n\t\t\t\t</Button>\r\n\t\t\t) : null}\r\n\t\t\t{comments.page > 0 ? (\r\n\t\t\t\t<Button className={classes.loader} color=\"secondary\" onClick={loadComments(\"less\")}>\r\n\t\t\t\t\tShow less\r\n\t\t\t\t</Button>\r\n\t\t\t) : null}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state: any) => {\r\n\treturn {\r\n\t\tloggedIn: state.login.loggedIn,\r\n\t\ttoken: state.login.token,\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps)(Comments);\r\n","import React, { FunctionComponent } from \"react\";\r\nimport Comments from './comments/Comments';\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\ntype ItineraryActiviesProps = {\r\n\titinerary: any;\r\n};\r\n\r\nconst useStyles = makeStyles({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexFlow: \"column nowrap\",\r\n\t},\r\n\tactivitiesContainer: {\r\n\t\tdisplay: \"flex\",\r\n\t\twidth: \"100%\",\r\n\t\tjustifyContent: \"space-evenly\",\r\n\t\toverflowX: \"auto\",\r\n\t},\r\n\tactivity: {\r\n\t\tbackgroundColor: \"#ccc\",\r\n\t\theight: \"100px\",\r\n\t\twidth: \"200px\",\r\n\t\tmargin: \"0 3px\",\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"center\",\r\n\t\talignItems: \"center\",\r\n\t},\r\n});\r\n\r\nconst ItineraryActivties: FunctionComponent<ItineraryActiviesProps> = ({ itinerary }) => {\r\n\tconst classes = useStyles();\r\n\treturn (\r\n\t\t<article className={classes.root + \" fade-in\"}>\r\n\t\t\t<h4>Activites:</h4>\r\n\t\t\t<div className={classes.activitiesContainer}>\r\n\t\t\t\t{itinerary.activities.map((activity: string, index: number) => (\r\n\t\t\t\t\t<div className={classes.activity} key={index}>\r\n\t\t\t\t\t\t<p>{activity}</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<Comments itinId={itinerary._id} />\r\n\t\t</article>\r\n\t);\r\n};\r\n\r\nexport default ItineraryActivties;\r\n","import React, { FunctionComponent, useState } from \"react\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Paper, Button } from \"@material-ui/core\";\r\nimport ItineraryCardHeader from \"./ItineraryCardHeader\";\r\nimport ItineraryActivties from \"./ItineraryActivties\";\r\n\r\ntype itineraryProps = {\r\n\titinerary: any;\r\n};\r\n\r\nconst useStyles = makeStyles({\r\n\troot: {\r\n\t\tmaxWidth: \"800px\",\r\n\t\tmargin: \"8px auto\",\r\n\t\t\"& header\": {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexFlow: \"row wrap\",\r\n\t\t},\r\n\t},\r\n\tmoreBtn: {\r\n\t\twidth: \"100%\",\r\n\t},\r\n});\r\n\r\nconst ItineraryCard: FunctionComponent<itineraryProps> = ({ itinerary }): any => {\r\n\tconst classes = useStyles();\r\n\tconst [moreToggled, setmoreToggled] = useState(false);\r\n\tconst handleMoreToggle = (e: any): void => setmoreToggled(!moreToggled);\r\n\treturn (\r\n\t\t<Paper className={classes.root + \" fade-in\"} elevation={3}>\r\n\t\t\t<ItineraryCardHeader id={itinerary._id} itinerary={itinerary} />\r\n\t\t\t{moreToggled ? <ItineraryActivties itinerary={itinerary} /> : null}\r\n\t\t\t<Button\r\n\t\t\t\tclassName={classes.moreBtn}\r\n\t\t\t\tsize=\"small\"\r\n\t\t\t\tcolor=\"primary\"\r\n\t\t\t\tonClick={handleMoreToggle}\r\n\t\t\t>\r\n\t\t\t\t{moreToggled ? \"Close\" : \"View all\"}\r\n\t\t\t</Button>\r\n\t\t</Paper>\r\n\t);\r\n};\r\n\r\nexport default ItineraryCard;\r\n","// import { fetchCitiesRequest } from \"./cityActions\";\r\n\r\nexport const FETCH_ITINERARIES_REQUEST = \"FETCH_ITINERARIES_REQUEST\";\r\nexport const FETCH_ITINERARIES_SUCCESS = \"FETCH_ITINERARIES_SUCCESS\";\r\nexport const FETCH_ITINERARIES_FAILURE = \"FETCH_ITINERARIES_FAILURE\";\r\nexport const RESET_ITINERARIES = \"RESET_ITINERARIES\";\r\n\r\nexport function fetchItinerariesRequest(): object {\r\n\treturn {\r\n\t\ttype: FETCH_ITINERARIES_REQUEST,\r\n\t};\r\n}\r\nexport function fetchItinerariesSuccess(itineraries: any): object {\r\n\treturn {\r\n\t\ttype: FETCH_ITINERARIES_SUCCESS,\r\n\t\tpayload: itineraries,\r\n\t};\r\n}\r\nexport function fetchItinerariesFailure(error: string): object {\r\n\treturn {\r\n\t\ttype: FETCH_ITINERARIES_FAILURE,\r\n\t\tpayload: error,\r\n\t};\r\n}\r\nexport function resetItineraries() {\r\n\treturn {\r\n\t\ttype: RESET_ITINERARIES,\r\n\t};\r\n}\r\n\r\nexport function fetchCurrentCityItineraries(cityId: string) {\r\n\treturn (dispatch: any) => {\r\n\t\tdispatch(fetchItinerariesRequest());\r\n\t\tfetch(`https://my-itinerary-demo.herokuapp.com/itinerariesAPI/city/${cityId}`) //TODO: NOT YET ROUTED\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (res.error) {\r\n\t\t\t\t\tthrow res.erorr;\r\n\t\t\t\t}\r\n\t\t\t\tdispatch(fetchItinerariesSuccess(res));\r\n\t\t\t})\r\n\t\t\t.catch(err => dispatch(fetchItinerariesFailure(err.message)));\r\n\t};\r\n}\r\n\r\nasync function fetchItinerarybyId(itinId: string, onlyOnce = true) {\r\n\treturn await fetch(`https://my-itinerary-demo.herokuapp.com/itinerariesAPI/itinerary/${itinId}`) //TODO: NOT YET ROUTED\r\n\t\t.then(res => res.json())\r\n\t\t.then(res => {\r\n\t\t\tconsole.log(res);\r\n\t\t\t\r\n\t\t\tif (res.error) {\r\n\t\t\t\tthrow res.erorr;\r\n\t\t\t}\r\n\t\t\treturn res.itinerary\r\n\t\t});\r\n\t// .catch(err => dispatch(fetchItinerariesFailure(err.message)));\r\n}\r\n\r\nexport function fetchItinerariesById(itinId: [string]) {\r\n\tif (Array.isArray(itinId)) {\r\n\t\treturn async (dispatch: any) => {\r\n\t\t\tdispatch(fetchItinerariesRequest());\r\n\r\n\t\t\tlet results = await Promise.all(\r\n\t\t\t\titinId.map((id: any) => {\r\n\t\t\t\t\treturn fetchItinerarybyId(id, false);\r\n\t\t\t\t})\r\n\t\t\t).catch((err: any) => console.error(err));\r\n\t\t\tconsole.log(\"fetchItinerariesById -> results\", results);\r\n\t\t\tdispatch(fetchItinerariesSuccess(results));\r\n\t\t\t//\r\n\t\t};\r\n\t}\r\n}\r\n","import \"./itineraries.scss\";\r\nimport React, { FunctionComponent } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useParams } from \"react-router\";\r\nimport CityCard from \"../cities/CityCard\";\r\nimport Spinner from \"../global/Spinner\";\r\nimport ItineraryCard from \"./ItineraryCard\";\r\n\r\n//REDUX\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport {\r\n   fetchCurrentCity as fetchCurrentCityAction,\r\n   resetCurrentCity as resetCurrentCityAction,\r\n} from \"../../store/actions/currentCityActions\";\r\nimport {\r\n   fetchCurrentCityItineraries as fetchItinerariesAction,\r\n   resetItineraries as resetItinerariesAction,\r\n} from \"../../store/actions/itineraryActions\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\n//STYLES\r\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n   createStyles({\r\n      root: {\r\n         maxWidth: 800,\r\n         margin: \"0 auto\",\r\n      },\r\n   })\r\n);\r\n\r\n//TYPES\r\ntype CityItinerariesProps = {\r\n   fetchCurrentCity: any;\r\n   city: any;\r\n   cityLoading: boolean;\r\n   fetchItineraries: any;\r\n   itinerariesLoading: boolean;\r\n   itineraries: [any];\r\n   resetItineraries: any;\r\n   resetCurrentCity: any;\r\n};\r\n\r\nconst CityItineraries: FunctionComponent<CityItinerariesProps> = ({\r\n   fetchCurrentCity,\r\n   city,\r\n   cityLoading,\r\n   fetchItineraries,\r\n   itinerariesLoading,\r\n   itineraries,\r\n   resetItineraries,\r\n   resetCurrentCity,\r\n}) => {\r\n   const classes = useStyles();\r\n   let pathName: any = useParams();\r\n   let cityName = pathName.cityName;\r\n\r\n   useEffect(() => {\r\n      if (!city.length) {\r\n         fetchCurrentCity(cityName);\r\n      }\r\n      fetchItineraries(city._id);\r\n   }, [city._id, city.length, cityName, fetchCurrentCity, fetchItineraries]);\r\n   useEffect(() => {\r\n      return () => {\r\n         resetItineraries();\r\n         resetCurrentCity();\r\n      };\r\n      // eslint-disable-next-line react-hooks/exhaustive-deps\r\n   }, []);\r\n   return (\r\n      <div className={classes.root}>\r\n         {cityLoading ? (\r\n            <Spinner />\r\n         ) : (\r\n            <CityCard\r\n               className=\"city-card\"\r\n               cityName={city.name}\r\n               cityImg={city.img}\r\n               imgCredit={city.img_credit}\r\n            />\r\n         )}\r\n         {itinerariesLoading ? (\r\n            <Spinner />\r\n         ) : (\r\n            itineraries.map((itinerary: any) => {\r\n               return <ItineraryCard key={itinerary._id} itinerary={itinerary} />;\r\n            })\r\n         )}\r\n         <Link to=\"/cities\">Choose another city...</Link>\r\n      </div>\r\n   );\r\n};\r\n\r\nconst mapStateToProps = (state: any): object => {\r\n   return {\r\n      cityLoading: state.currentCity.loading,\r\n      city: state.currentCity.city,\r\n      itinerariesLoading: state.itineraries.loading,\r\n      itineraries: state.itineraries.itineraries,\r\n   };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) =>\r\n   bindActionCreators(\r\n      {\r\n         fetchCurrentCity: fetchCurrentCityAction,\r\n         fetchItineraries: fetchItinerariesAction,\r\n         resetItineraries: resetItinerariesAction,\r\n         resetCurrentCity: resetCurrentCityAction,\r\n         // fetchAuthors: fetchAuthorsAction,\r\n      },\r\n      dispatch\r\n   );\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CityItineraries);\r\n","import React, { useState, useEffect } from \"react\";\r\nimport ItineraryCard from \"../itineraries/ItineraryCard\";\r\nimport Spinner from \"../global/Spinner\";\r\n\r\nimport { Redirect } from \"react-router-dom\";\r\n//REDUX\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport {\r\n\tresetItineraries,\r\n\tfetchItinerariesById as fetchItinerariesByIdAction,\r\n} from \"../../store/actions/itineraryActions\";\r\n\r\nfunction Favourites(props: any) {\r\n\tconst {\r\n\t\ttoken,\r\n\t\tredirect,\r\n\t\titinSuccess,\r\n\t\titinLoading,\r\n\t\titineraries,\r\n\t\tfetchItinerariesById,\r\n\t\tresetItineraries,\r\n\t} = props;\r\n\tconst [favIds, setFavIds] = useState([]);\r\n\tconst [favPending, setFavPending] = useState(false);\r\n\tconst [favSuccess, setFavSuccess] = useState(false);\r\n\tuseEffect(() => {\r\n\t\tresetItineraries();\r\n\t\tasync function fetchUserFavourites() {\r\n\t\t\tsetFavPending(true);\r\n\t\t\tlet res = await fetch(\"https://my-itinerary-demo.herokuapp.com/usersAPI/user/favourites\", {\r\n\t\t\t\tmethod: \"get\",\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t\"x-api-key\": token,\r\n\t\t\t\t},\r\n\t\t\t}).then(res => res.json());\r\n\r\n\t\t\tif (res.success) {\r\n\t\t\t\tsetFavIds(res.favourites);\r\n\t\t\t\tsetFavSuccess(true);\r\n\t\t\t} else {\r\n\t\t\t\tsetFavIds([]);\r\n\t\t\t\tsetFavSuccess(false);\r\n\t\t\t}\r\n\t\t\tsetFavPending(false);\r\n\t\t}\r\n\t\tfetchUserFavourites();\r\n\t}, [resetItineraries, token]);\r\n\tuseEffect(() => {\r\n\t\tif (favIds.length !== 0) {\r\n\t\t\tconsole.log(\"favIds\", favIds);\r\n\t\t\tfetchItinerariesById(favIds);\r\n\t\t}\r\n\t}, [favIds, fetchItinerariesById]);\r\n\r\n\tif (redirect) return <Redirect to=\"/login\" />;\r\n\r\n\treturn (\r\n\t\t<div style={{padding: \"1em\"}}>\r\n\t\t\t<h1 style={{ textAlign: \"center\" }}>Favourites</h1>\r\n\t\t\t{favPending ? <Spinner /> : null}\r\n\t\t\t{favSuccess ? (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{itinLoading ? <Spinner /> : null}\r\n\t\t\t\t\t{itinSuccess\r\n\t\t\t\t\t\t? itineraries.map((itinerary: any) => {\r\n\t\t\t\t\t\t\t\treturn <ItineraryCard key={itinerary._id} itinerary={itinerary} />;\r\n\t\t\t\t\t\t  })\r\n\t\t\t\t\t\t: null}\r\n\t\t\t\t</div>\r\n\t\t\t) : null}\r\n\t\t\t{favSuccess && favIds.length === 0 ? (\r\n\t\t\t\t<p>\r\n\t\t\t\t\tThere appears to be no favourites, try using the heart when browsing through city\r\n\t\t\t\t\titineraries to add them here.\r\n\t\t\t\t</p>\r\n\t\t\t) : null}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state: any) => {\r\n\treturn {\r\n\t\ttoken: state.login.token,\r\n\t\titinSuccess: state.itineraries.success,\r\n\t\titinLoading: state.itineraries.loading,\r\n\t\titineraries: state.itineraries.itineraries,\r\n\t\tredirect: state.login.redirect,\r\n\t};\r\n};\r\nconst mapDispatchToProps = (dispatch: any) =>\r\n\tbindActionCreators(\r\n\t\t{\r\n\t\t\tfetchItinerariesById: fetchItinerariesByIdAction,\r\n\t\t\tresetItineraries,\r\n\t\t},\r\n\t\tdispatch\r\n\t);\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Favourites);\r\n","import React from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { makeStyles, Theme, createStyles } from \"@material-ui/core/styles\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Input from \"@material-ui/core/Input\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Visibility from \"@material-ui/icons/Visibility\";\r\nimport VisibilityOff from \"@material-ui/icons/VisibilityOff\";\r\nimport { FormHelperText } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n\tcreateStyles({\r\n\t\troot: {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexWrap: \"wrap\",\r\n\t\t},\r\n\t\tmargin: {\r\n\t\t\tmargin: theme.spacing(1),\r\n\t\t},\r\n\t\twithoutLabel: {\r\n\t\t\tmarginTop: theme.spacing(3),\r\n\t\t},\r\n\t\ttextField: {\r\n\t\t\twidth: 200,\r\n\t\t},\r\n\t})\r\n);\r\n\r\ntype Props = {\r\n\tonValueChange?: any;\r\n\tvalidPassword?: boolean;\r\n\terrorString?: string;\r\n};\r\n\r\ninterface State {\r\n\tpassword: string;\r\n\tshowPassword: boolean;\r\n}\r\n\r\nconst InputAdornments: React.FunctionComponent<Props> = ({\r\n\tonValueChange,\r\n\tvalidPassword,\r\n\terrorString,\r\n}) => {\r\n\tconst classes = useStyles();\r\n\tconst [values, setValues] = React.useState<State>({\r\n\t\tpassword: \"\",\r\n\t\tshowPassword: false,\r\n\t});\r\n\r\n\tconst handleChange = (prop: keyof State) => (\r\n\t\tevent: React.ChangeEvent<HTMLInputElement>\r\n\t) => {\r\n\t\tsetValues({ ...values, [prop]: event.target.value });\r\n\t\tonValueChange(\"password\", event.target.value);\r\n\t};\r\n\r\n\tconst handleClickShowPassword = () => {\r\n\t\tsetValues({ ...values, showPassword: !values.showPassword });\r\n\t};\r\n\r\n\tconst handleMouseDownPassword = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n\t\tevent.preventDefault();\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<div>\r\n\t\t\t\t<FormControl className={clsx(classes.margin, classes.textField)}>\r\n\t\t\t\t\t<InputLabel htmlFor=\"standard-adornment-password\">Password</InputLabel>\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\terror={!validPassword}\r\n\t\t\t\t\t\tid=\"stadard-adornment-password\"\r\n\t\t\t\t\t\ttype={values.showPassword ? \"text\" : \"password\"}\r\n\t\t\t\t\t\tvalue={values.password}\r\n\t\t\t\t\t\tonChange={handleChange(\"password\")}\r\n\t\t\t\t\t\tendAdornment={\r\n\t\t\t\t\t\t\t<InputAdornment position=\"end\">\r\n\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\taria-label=\"toggle password visibility\"\r\n\t\t\t\t\t\t\t\t\tonClick={handleClickShowPassword}\r\n\t\t\t\t\t\t\t\t\tonMouseDown={handleMouseDownPassword}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{values.showPassword ? <Visibility /> : <VisibilityOff />}\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<FormHelperText>{validPassword ? null : errorString}</FormHelperText>\r\n\t\t\t\t</FormControl>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default InputAdornments;\r\n","import React from \"react\";\r\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CloudUploadIcon from \"@material-ui/icons/CloudUpload\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n\tcreateStyles({\r\n\t\troot: {\r\n\t\t\t\"& > *\": {\r\n\t\t\t\tmargin: theme.spacing(1),\r\n\t\t\t},\r\n\t\t},\r\n\t\tinput: {\r\n\t\t\tdisplay: \"none\",\r\n\t\t},\r\n\t})\r\n);\r\n\r\nexport default function UploadImage() {\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<input\r\n\t\t\t\taccept=\"image/*\"\r\n\t\t\t\tclassName={classes.input}\r\n\t\t\t\tid=\"contained-button-file\"\r\n\t\t\t\tmultiple\r\n\t\t\t\ttype=\"file\"\r\n\t\t\t/>\r\n\t\t\t<label htmlFor=\"contained-button-file\">\r\n\t\t\t\t<Button\r\n          // disabled\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\tcomponent=\"span\"\r\n\t\t\t\t\tstartIcon={<CloudUploadIcon />}\r\n\t\t\t\t>\r\n\t\t\t\t\tUpload\r\n\t\t\t\t</Button>\r\n\t\t\t</label>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\r\nimport Popover from \"@material-ui/core/Popover\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n\tcreateStyles({\r\n\t\ttypography: {\r\n\t\t\tpadding: theme.spacing(2),\r\n\t\t},\r\n\t})\r\n);\r\ntype PopoverProps = {\r\n    textString: string;\r\n    elementAnchor: HTMLElement | null;\r\n}\r\n\r\nconst SimplePopover: React.FC<PopoverProps> = ({textString, elementAnchor}) => {\r\n\tconst classes = useStyles();\r\n\tconst [anchorEl, setAnchorEl] = React.useState<HTMLElement | null>(null);\r\n\r\n\t//   const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n\t//     setAnchorEl(event.currentTarget);\r\n\t//   };\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetAnchorEl(null);\r\n\t};\r\n\r\n\tconst open = Boolean(anchorEl);\r\n\tconst id = open ? \"simple-popover\" : undefined;\r\n\r\n    React.useEffect(() => {\r\n        setAnchorEl(elementAnchor)\r\n    }, [elementAnchor])\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Popover\r\n\t\t\t\tid={id}\r\n\t\t\t\topen={open}\r\n\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t\tanchorOrigin={{\r\n\t\t\t\t\tvertical: \"bottom\",\r\n\t\t\t\t\thorizontal: \"center\",\r\n\t\t\t\t}}\r\n\t\t\t\ttransformOrigin={{\r\n\t\t\t\t\tvertical: \"top\",\r\n\t\t\t\t\thorizontal: \"center\",\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<Typography className={classes.typography}>{textString}</Typography>\r\n\t\t\t</Popover>\r\n\t\t</div>\r\n\t);\r\n}\r\nexport default SimplePopover;\r\n","import React, { useState } from \"react\";\r\nimport SubmitButton from \"../global/SubmitButton\";\r\nimport PasswordInput from \"./PasswordInput\";\r\nimport UploadImage from \"./UploadImage\";\r\nimport SimplePopover from \"../global/SimplePopover\";\r\nimport { FormControl, InputLabel, Input, FormHelperText, Paper } from \"@material-ui/core\";\r\n\r\n//STYLES\r\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\r\nimport AccountCircleIcon from \"@material-ui/icons/AccountCircle\";\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n\tcreateStyles({\r\n\t\troot: {\r\n\t\t\theight: \"100%\",\r\n\t\t\twidth: \"100%\",\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\tjustifyContent: \"center\",\r\n\t\t},\r\n\t\tformRoot: {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexFlow: \"column nowrap\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\tjustifyContent: \"space-around\",\r\n\t\t\tpadding: \"2em 3em\",\r\n\t\t\tmaxWidth: \"500px\",\r\n\t\t\tminHeight: \"400px\",\r\n\t\t\tmargin: \"0 auto\",\r\n\t\t},\r\n\t\tupload: {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t},\r\n\t})\r\n);\r\n//TYPES\r\ninterface State {\r\n\temail: string;\r\n\tpassword: string;\r\n\timg: string; //???\r\n}\r\ninterface duplicateState {\r\n\tisDuplicate: boolean;\r\n\tmsg: string;\r\n}\r\n//COMPONENT\r\nfunction CreateAccount() {\r\n\tconst classes = useStyles();\r\n\tconst [values, setValues] = useState<State>({\r\n\t\temail: \"\",\r\n\t\tpassword: \"\",\r\n\t\timg: \"\",\r\n\t});\r\n\tconst [success, setSuccess] = useState<boolean>(false);\r\n\tconst [errors, setErrors] = useState<any>({\r\n\t\temail: \"\",\r\n\t\tpassword: \"\",\r\n\t});\r\n\tconst [isPosting, setIsPosting] = useState(false);\r\n\tconst [duplicateEmail, setDuplicateEmail] = useState<duplicateState>({\r\n\t\tisDuplicate: false,\r\n\t\tmsg: \"\",\r\n\t});\r\n\r\n\tconst handleValueChange = (prop: keyof State, newValue: any) => {\r\n\t\tsetValues({ ...values, [prop]: newValue }); //Changes state value\r\n\t\tsetErrors({ ...errors, [prop]: \"\" }); //Resets errors\r\n\t};\r\n\tconst handleChange = (prop: keyof State) => (\r\n\t\tevent: React.ChangeEvent<HTMLInputElement>\r\n\t) => {\r\n\t\thandleValueChange(prop, event.target.value);\r\n\t};\r\n\tconst handleSubmit = (event: React.SyntheticEvent) => {\r\n\t\tevent.preventDefault();\r\n\t\tsetIsPosting(true);\r\n\t\tpostUser()\r\n\t\t\t//delete below for non async await ----\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (res.hasOwnProperty(\"errors\")) {\r\n\t\t\t\t\tupdateErrors(res.errors);\r\n\t\t\t\t} else if (res.hasOwnProperty(\"duplicate\")) {\r\n\t\t\t\t\tsetDuplicateEmail({\r\n\t\t\t\t\t\tisDuplicate: res.duplicate,\r\n\t\t\t\t\t\tmsg: res.msg,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetSuccess(true);\r\n\t\t\t\t}\r\n\t\t\t\tsetIsPosting(false);\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tconsole.error(err);\r\n\t\t\t\tsetSuccess(false);\r\n\t\t\t\tsetIsPosting(false);\r\n\t\t\t\tsetErrors(err);\r\n\t\t\t});\r\n\t\t//---\r\n\t};\r\n\tasync function postUser() {\r\n\t\tconst { email, password } = values;\r\n\t\tlet response = await fetch(\"https://my-itinerary-demo.herokuapp.com/usersAPI/create\", {\r\n\t\t\tmethod: \"post\",\r\n\t\t\theaders: {\r\n\t\t\t\tAccept: \"application/json, text/plain, */*\",\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({ email: email, password: password }),\r\n\t\t});\r\n\t\tlet data = await response.json();\r\n\t\treturn data;\r\n\t}\r\n\tfunction updateErrors(result: any): void {\r\n\t\tlet object: any = { ...errors };\r\n\t\tfor (let i = 0; i < result.length; i++) {\r\n\t\t\tconst error = result[i];\r\n\t\t\tlet key = error.param;\r\n\t\t\tlet value = error.msg;\r\n\t\t\tobject[key] = value;\r\n\t\t}\r\n\t\tsetErrors(object);\r\n\t}\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper elevation={3}>\r\n\t\t\t\t<form className={classes.formRoot} onSubmit={handleSubmit}>\r\n\t\t\t\t\t<FormControl>\r\n\t\t\t\t\t\t<InputLabel htmlFor=\"email-input\">Email address</InputLabel>\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\terror={errors.email.length ? true : false}\r\n\t\t\t\t\t\t\tid=\"email-input\"\r\n\t\t\t\t\t\t\tonChange={handleChange(\"email\")}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<FormHelperText id=\"email-helper-text\">\r\n\t\t\t\t\t\t\t{errors.email.length\r\n\t\t\t\t\t\t\t\t? \"Please provide a valid email\"\r\n\t\t\t\t\t\t\t\t: \"We'll never share your email.\"}\r\n\t\t\t\t\t\t</FormHelperText>\r\n\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t<SimplePopover\r\n\t\t\t\t\t\ttextString=\"This email is already in use\"\r\n\t\t\t\t\t\telementAnchor={\r\n\t\t\t\t\t\t\tduplicateEmail.isDuplicate ? document.getElementById(\"email-input\") : null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<PasswordInput\r\n\t\t\t\t\t\tonValueChange={handleValueChange}\r\n\t\t\t\t\t\tvalidPassword={!errors.password.length}\r\n\t\t\t\t\t\terrorString={errors.password}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<div className={classes.upload}>\r\n\t\t\t\t\t\t<AccountCircleIcon fontSize=\"large\" color=\"secondary\" />\r\n\t\t\t\t\t\t<UploadImage />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<SubmitButton\r\n\t\t\t\t\t\tloading={isPosting}\r\n\t\t\t\t\t\tsuccess={success}\r\n\t\t\t\t\t\ttext=\"Create Account\"\r\n\t\t\t\t\t\tsuccessText=\"Account Created!\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</form>\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default CreateAccount;\r\n","import React, { useState } from \"react\";\r\nimport { Redirect, Link } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { updateLoginStatus } from \"../../store/actions/loginActions\";\r\nimport PasswordInput from \"./PasswordInput\";\r\nimport { Paper, FormControl, InputLabel, Input, FormHelperText } from \"@material-ui/core\";\r\n\r\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\r\nimport SubmitButton from \"../global/SubmitButton\";\r\nimport { bindActionCreators } from \"redux\";\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n\tcreateStyles({\r\n\t\troot: {\r\n\t\t\theight: \"100%\",\r\n\t\t\twidth: \"100%\",\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\tjustifyContent: \"center\",\r\n\t\t},\r\n\t\tformRoot: {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexFlow: \"column nowrap\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\tjustifyContent: \"space-around\",\r\n\t\t\tpadding: \"2em 3em\",\r\n\t\t\tmaxWidth: \"500px\",\r\n\t\t\tminHeight: \"400px\",\r\n\t\t\tmargin: \"0 auto\",\r\n\t\t},\r\n\t\tupload: {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t},\r\n\t\tcreateLink: {\r\n\t\t\ttextAlign: \"center\",\r\n\t\t\tmargin: \"0.7em\",\r\n\t\t\tdisplay: \"block\",\r\n\t\t},\r\n\t})\r\n);\r\ninterface State {\r\n\temail: string;\r\n\tpassword: string;\r\n}\r\n\r\nfunction LoginPage(props: any) {\r\n\tconst classes = useStyles();\r\n\t//STATE:\r\n\tconst [values, setValues] = useState<State>({\r\n\t\temail: \"\",\r\n\t\tpassword: \"\",\r\n\t});\r\n\tconst [errors, setErrors] = useState<State>({\r\n\t\temail: \"\",\r\n\t\tpassword: \"\",\r\n\t});\r\n\tconst [loading, setloading] = useState<boolean>(false);\r\n\tconst [loginSuccess, setLoginSuccess] = useState<boolean>(false);\r\n\tconst [redirectToHome, setRedirectToHome] = useState<boolean>(false);\r\n\t//FUNCTIONS:\r\n\tconst handleValueChange = (prop: keyof State, newValue: any) => {\r\n\t\tsetValues({ ...values, [prop]: newValue });\r\n\t\t//Change below: due to UX\r\n\t\t// setErrors({ ...errors, [prop]: \"\" });\r\n\t\tsetErrors({ email: \"\", password: \"\" });\r\n\t};\r\n\tconst handleChange = (prop: keyof State) => (\r\n\t\tevent: React.ChangeEvent<HTMLInputElement>\r\n\t) => {\r\n\t\thandleValueChange(prop, event.target.value);\r\n\t};\r\n\tconst handleSubmit = (event: React.SyntheticEvent) => {\r\n\t\tevent.preventDefault();\r\n\t\tlet errorsObj: any = { ...errors };\r\n\t\tif (!values.email.length) {\r\n\t\t\terrorsObj.email = \"Please enter your email\";\r\n\t\t}\r\n\t\tif (!values.password.length) {\r\n\t\t\terrorsObj.password = \"Please enter your password\";\r\n\t\t}\r\n\t\tif (errorsObj.email.length || errorsObj.password.length) {\r\n\t\t\tsetErrors(errorsObj);\r\n\t\t} else {\r\n\t\t\tconst { email, password } = values;\r\n\t\t\tsetloading(true);\r\n\t\t\twindow.localStorage.removeItem(\"session_token\");\r\n\t\t\tsubmitLogin(email, password)\r\n\t\t\t\t.then((res: any): any => {\r\n\t\t\t\t\tif (res.success) {\r\n\t\t\t\t\t\twindow.localStorage.setItem(\"session_token\", res.token);\r\n\t\t\t\t\t\tsetLoginSuccess(true);\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\tsetRedirectToHome(true);\r\n\t\t\t\t\t\t}, 800);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsetErrors({ email: res.msg, password: res.msg });\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetloading(false);\r\n\t\t\t\t\tprops.updateLoginStatus();\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\tsetloading(false);\r\n\t\t\t\t\tprops.updateLoginStatus();\r\n\t\t\t\t});\r\n\t\t}\r\n\t};\r\n\tasync function submitLogin(email: string, password: string): Promise<any> {\r\n\t\tlet response = await fetch(\"https://my-itinerary-demo.herokuapp.com/usersAPI/login\", {\r\n\t\t\tmethod: \"post\",\r\n\t\t\theaders: {\r\n\t\t\t\tAccept: \"application/json, text/plain, */*\",\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({ email, password }),\r\n\t\t});\r\n\t\treturn await response.json();\r\n\t}\r\n\tif (redirectToHome) {\r\n\t\treturn <Redirect to=\"/\" />;\r\n\t}\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper elevation={3}>\r\n\t\t\t\t<form className={classes.formRoot} onSubmit={handleSubmit}>\r\n\t\t\t\t\t<FormControl>\r\n\t\t\t\t\t\t<InputLabel htmlFor=\"email-input\">Email address</InputLabel>\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\terror={errors.email.length ? true : false}\r\n\t\t\t\t\t\t\tid=\"email-input\"\r\n\t\t\t\t\t\t\tonChange={handleChange(\"email\")}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<FormHelperText id=\"email-helper-text\">\r\n\t\t\t\t\t\t\t{errors.email.length ? errors.email : null}\r\n\t\t\t\t\t\t</FormHelperText>\r\n\t\t\t\t\t</FormControl>\r\n\r\n\t\t\t\t\t<PasswordInput\r\n\t\t\t\t\t\tonValueChange={handleValueChange}\r\n\t\t\t\t\t\tvalidPassword={errors.password.length ? false : true}\r\n\t\t\t\t\t\terrorString={errors.password}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<SubmitButton\r\n\t\t\t\t\t\tloading={loading}\r\n\t\t\t\t\t\tsuccess={loginSuccess}\r\n\t\t\t\t\t\ttext=\"Log in\"\r\n\t\t\t\t\t\tsuccessText=\"Success!\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</form>\r\n\t\t\t\t<Link className={classes.createLink} to=\"/create\">\r\n\t\t\t\t\tDon't have an account? Click here.\r\n\t\t\t\t</Link>\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n}\r\n//REDUX:\r\nconst mapStatetoProps = (state: any): object => {\r\n\treturn {\r\n\t\tloggedIn: state.login.loggedIn,\r\n\t};\r\n};\r\nconst mapDispatchToProps = (dispatch: any) =>\r\n\tbindActionCreators(\r\n\t\t{\r\n\t\t\tupdateLoginStatus,\r\n\t\t},\r\n\t\tdispatch\r\n\t);\r\nexport default connect(mapStatetoProps, mapDispatchToProps)(LoginPage);\r\n\r\n//ADD REDUX PROPS and FUNCTIONS\r\n","import React from 'react';\r\n\r\nexport default function NotFound() {\r\n    const styles = {\r\n        display: \"flex\",\r\n        flexFlow: \"column\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\"\r\n        //https://media.giphy.com/media/l2JJKs3I69qfaQleE/giphy.gif --ALT\r\n    }\r\n    return (\r\n        <div style={styles}>\r\n            <h1>Page not found</h1>\r\n            <h3>\"This is not the page you were looking for ...\"</h3>\r\n            <img src=\"https://media.giphy.com/media/4Xbr39OD96ZmU/giphy.gif\" alt=\"Obi Wan waving hand\"/>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./footer.scss\";\r\nimport home from './homeIcon.png'\r\n\r\nexport default function Footer() {\r\n    return (\r\n        <footer>\r\n            <Link to=\"/\"><img src={home} alt=\"Home\" /></Link>\r\n        </footer>\r\n    )\r\n}\r\n","import React from \"react\";\r\nimport { HashRouter, Route, Switch } from \"react-router-dom\";\r\nimport \"./App.scss\";\r\n\r\n//COMPONENTS\r\nimport Nav from \"../nav/Nav\";\r\nimport Landing from \"../landing/Landing\";\r\nimport Cities from \"../cities/Cities\";\r\nimport CityItineraries from \"../itineraries/CityItineraries\";\r\nimport Favourites from \"../favourites/Favourites\";\r\nimport CreateAccount from \"../account/CreateAccount\";\r\nimport LoginPage from \"../account/LoginPage\";\r\nimport NotFound from \"../NotFound\";\r\nimport Footer from \"../footer/Footer\";\r\n\r\n//REDUX:\r\nimport { connect } from \"react-redux\";\r\nimport { updateLoginStatus } from \"../../store/actions/loginActions\";\r\nimport { bindActionCreators } from \"redux\";\r\n\r\n//THEME FOR APP\r\nimport { createMuiTheme } from \"@material-ui/core/styles\";\r\nimport { ThemeProvider } from \"@material-ui/styles\";\r\n// import { userLoggedIn } from \"../../store/actions/loginActions\";\r\nconst theme = createMuiTheme({\r\n\tspacing: 8,\r\n\tpalette: {\r\n\t\tprimary: {\r\n\t\t\t//Dont forget to change on variables.scss also\r\n\t\t\t// main: \"#4a90ff\", // Blue\r\n\t\t\t// main: \"#394e56\", //Grey\r\n\t\t\tmain: \"#dc2b00\", // Red\r\n\t\t},\r\n\t\tsecondary: {\r\n\t\t\tmain: \"#394e56\", //Dark grey\r\n\t\t\t// main: \"#dc2b00\", // Red\r\n\t\t},\r\n\t},\r\n});\r\nfunction App() {\r\n\tReact.useEffect(() => {\r\n\t\tupdateLoginStatus();\r\n\t});\r\n\treturn (\r\n\t\t<HashRouter basename=\"/\">\r\n\t\t\t<div className=\"App\">\r\n\t\t\t\t<ThemeProvider theme={theme}>\r\n\t\t\t\t\t<Nav />\r\n\t\t\t\t\t<div className=\"page-content\">\r\n\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t<Route exact path=\"/\" component={Landing} />\r\n\t\t\t\t\t\t\t<Route exact path=\"/MYtinerary\" component={Landing} />\r\n\t\t\t\t\t\t\t<Route path=\"/cities\" component={Cities} />\r\n\t\t\t\t\t\t\t<Route path=\"/itineraries/:cityName\" component={CityItineraries} />\r\n\t\t\t\t\t\t\t<Route path=\"/favourites\" component={Favourites} />\r\n\t\t\t\t\t\t\t<Route path=\"/create\" component={CreateAccount} />\r\n\t\t\t\t\t\t\t<Route path=\"/login\" component={LoginPage} />\r\n\t\t\t\t\t\t\t<Route component={NotFound} />\r\n\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Footer />\r\n\t\t\t\t</ThemeProvider>\r\n\t\t\t</div>\r\n\t\t</HashRouter>\r\n\t);\r\n}\r\nconst mapDispatchToProps = (dispatch: any) =>\r\n\tbindActionCreators(\r\n\t\t{\r\n\t\t\tupdateLoginStatus,\r\n\t\t},\r\n\t\tdispatch\r\n\t);\r\nexport default connect(mapDispatchToProps)(App);\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import {\r\n\tFETCH_CITIES_REQUEST,\r\n\tFETCH_CITIES_SUCCESS,\r\n\tFETCH_CITIES_ERROR,\r\n} from \"../actions/cityActions\";\r\n\r\nconst initialCitiesState = {\r\n\tloading: false,\r\n\tsuccess: false,\r\n\tcities: [],\r\n\terror : '',\r\n};\r\n\r\nexport default function citiesReducer(state: object = initialCitiesState, action: any = {}) {\r\n\tswitch (action.type) {\r\n\t\tcase FETCH_CITIES_REQUEST:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloading: true,\r\n\t\t\t};\r\n\t\tcase FETCH_CITIES_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\tsuccess: true,\r\n\t\t\t\tcities: action.payload,\r\n\t\t\t};\r\n\t\tcase FETCH_CITIES_ERROR:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\tsuccess: false,\r\n\t\t\t\terror: action.payload,\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import {\r\n\tCURRENT_CITY_REQUEST,\r\n\tCURRENT_CITY_SUCCESS,\r\n\tCURRENT_CITY_ERROR,\r\n\tRESET_CURRENT_CITY,\r\n} from \"../actions/currentCityActions\";\r\n\r\nconst initialCurrentCityState = {\r\n\tloading: false,\r\n\tcity: {},\r\n\terror: \"\",\r\n};\r\n\r\nexport default function citiesReducer(\r\n\tstate: object = initialCurrentCityState,\r\n\taction: any = {}\r\n) {\r\n\tswitch (action.type) {\r\n\t\tcase CURRENT_CITY_REQUEST:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloading: true,\r\n\t\t\t};\r\n\t\tcase CURRENT_CITY_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\tcity: action.payload,\r\n\t\t\t};\r\n\t\tcase CURRENT_CITY_ERROR:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\terror: action.payload,\r\n\t\t\t};\r\n\t\tcase RESET_CURRENT_CITY:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\tcity: {},\r\n\t\t\t\terror: \"\",\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import {\r\n\tFETCH_ITINERARIES_REQUEST,\r\n\tFETCH_ITINERARIES_SUCCESS,\r\n\tFETCH_ITINERARIES_FAILURE,\r\n\tRESET_ITINERARIES,\r\n} from \"../actions/itineraryActions\";\r\n\r\nconst initialItineraryState = {\r\n\tloading: false,\r\n\tsuccess: null,\r\n\titineraries: [],\r\n\terror: \"\",\r\n};\r\n\r\nexport default function itinerariesReducer(\r\n\tstate: object = initialItineraryState,\r\n\taction: any = {}\r\n) {\r\n\tswitch (action.type) {\r\n\t\tcase FETCH_ITINERARIES_REQUEST:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloading: true,\r\n\t\t\t\tsuccess: null,\r\n\t\t\t};\r\n\t\tcase FETCH_ITINERARIES_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\tsuccess: true,\r\n\t\t\t\titineraries: action.payload,\r\n\t\t\t};\r\n\t\tcase FETCH_ITINERARIES_FAILURE:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\tsuccess: false,\r\n\t\t\t\titineraries: [],\r\n\t\t\t\terror: action.payload,\r\n\t\t\t};\r\n\t\tcase RESET_ITINERARIES:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\tsuccess: null,\r\n\t\t\t\titineraries: [],\r\n\t\t\t\terror: \"\",\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import { USER_LOGGED_IN, USER_LOGGED_OUT, REDIRECT } from \"../actions/loginActions\";\r\n\r\ntype IntialLoginState = {\r\n\tpending: boolean;\r\n\tloggedIn: boolean;\r\n\ttoken: string;\r\n\terror: string;\r\n\tredirect: boolean;\r\n};\r\n\r\nconst initialLoginState: IntialLoginState = {\r\n\tpending: true,\r\n\tloggedIn: false,\r\n\ttoken: \"\",\r\n\terror: \"\",\r\n\tredirect: false,\r\n};\r\n\r\nexport default function loginReducer(\r\n\tstate: object = initialLoginState,\r\n\taction: any = {}\r\n) {\r\n\tswitch (action.type) {\r\n\t\tcase USER_LOGGED_IN:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpending: false,\r\n\t\t\t\tloggedIn: true,\r\n\t\t\t\tredirect: false,\r\n\t\t\t\ttoken: action.payload,\r\n\t\t\t};\r\n\t\tcase USER_LOGGED_OUT:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpending: false,\r\n\t\t\t\tloggedIn: false,\r\n\t\t\t\ttoken: \"\",\r\n\t\t\t\tredirect: true,\r\n\t\t\t};\r\n\t\tcase REDIRECT:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tredirect: true,\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import {\r\n\tUSER_PENDING,\r\n\tUSER_SUCCESS,\r\n\tUSER_ERROR,\r\n\tCLEAR_CURRENT_USER,\r\n\t// ADD_FAV,\r\n\t// DEL_FAV,\r\n\t// CLEAR_FAV,\r\n} from \"../actions/userActions\";\r\n\r\ntype IntialUserState = {\r\n\tpending: boolean;\r\n\tsuccess: boolean;\r\n\tdetails: any;\r\n\terror: string;\r\n};\r\n\r\nconst intialUserState: IntialUserState = {\r\n\tpending: false,\r\n\tsuccess: false,\r\n\tdetails: {\r\n\t\t// name:\"\",\r\n\t\t// img: \"\",\r\n\t\t// favourities: [],\r\n\t},\r\n\terror: \"\",\r\n};\r\n\r\nexport default function loginReducer(state: any = intialUserState, action: any = {}) {\r\n\tswitch (action.type) {\r\n\t\tcase USER_PENDING:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpending: true,\r\n\t\t\t};\r\n\t\tcase USER_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpending: false,\r\n\t\t\t\tsuccess: true,\r\n\t\t\t\tdetails: action.payload,\r\n\t\t\t};\r\n\t\tcase USER_ERROR:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsuccess: false,\r\n\t\t\t\tdetails: {},\r\n\t\t\t\terror: action.payload,\r\n\t\t\t};\r\n\t\tcase CLEAR_CURRENT_USER:\r\n\t\t\treturn {\r\n\t\t\t\tsuccess: false,\r\n\t\t\t\tdetails: {},\r\n\t\t\t\terror: \"\",\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import { combineReducers } from \"redux\";\r\n//IMPORTED REDUCERS:\r\nimport citiesReducer from \"./citiesReducer\";\r\nimport currentCityReducer from \"./currentCityReducer\";\r\nimport itineraryReducer from \"./itineraryReducer\";\r\nimport loginReducer from \"./loginReducer\";\r\nimport userReducer from \"./userReducer\";\r\n\r\nconst rootReducer = combineReducers({\r\n\tcities: citiesReducer,\r\n\tcurrentCity: currentCityReducer,\r\n\titineraries: itineraryReducer,\r\n\tlogin: loginReducer,\r\n\tcurrentUser: userReducer,\r\n});\r\nexport default rootReducer;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.scss\";\r\nimport App from \"./components/app/App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\n//REDUX\r\n// import { createStore } from 'redux';\r\n// import { Provider } from 'react-redux';\r\n// import rootReducer from './store/rootReducer';\r\n// const store = createStore(rootReducer);\r\n\r\n//REDUX\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport { createStore, applyMiddleware } from \"redux\";\r\nimport { Provider } from \"react-redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport rootReducer from \"./store/reducers/rootReducer\";\r\nconst middlewares = [thunk];\r\nconst store = createStore(rootReducer, composeWithDevTools(applyMiddleware(...middlewares)));\r\n\r\nReactDOM.render(\r\n\t<Provider store={store}>\r\n\t\t<App />\r\n\t</Provider>,\r\n\tdocument.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","module.exports = __webpack_public_path__ + \"static/media/circled-right-2.16fd0ef3.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAA9lAAAPZQFXwiB7AAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAvdQTFRF////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVynFdwAAAPx0Uk5TAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIjJCUmJygpKistLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaW1xdXl9gYWJjZGVmZ2hpamtsbW5vcHJzdHV2d3h6e3x9fn+AgYKDhIWGh4iJiouMjY6PkJGSk5SVlpeYmZqbnJ2en6ChoqOkpaanqKmqq6ytrq+wsbKztLW2t7i5uru8vb6/wMHCw8TFxsfIycrLzM3Oz9DR0tPU1dbX2Nna29zd3t/g4eLj5OXm5+jp6uvs7e7v8PHy8/T19vf4+fr7/P3+1KDfXAAAE+ZJREFUeNrtnXlgVNW9gG9WIAHCWkCQRaQgioiIbIobFas+rAVF0YJULbZUxRb1+dAiWkTBIkVqqcW9PAlgEVFRtChifCyyKhCoiCCEsAqE7OePV7WUCZD5zfK7Z+6d+31/J3OGez5mvtzlHMcBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcJHavfoP++24abNnTxv322H9e9XmiARp8vuNyyszVSjLG3dFHZeHzewyZMKCvDhY8sp9V7Zg+uKkzl3HT/5Ryj8ZWdfFgfvkGw2m1WUO46D1hAPhju43T7Zx61NnSqXRYWs/pjFWeuaWS4e3PLenGyOn5Rk9BjCTMZEzPbLjOz1Hf+x7FOff7GrEZMbApVsj/pC9VHvs04s0BTAzmM2oyZocxXdw5eQs3dH/ZnQ5nwmNki4bozvCG7uoDr9JWYARzGh0DDgc7SE+/FPNPwEqlQX4M1MaFf8TwwRU/rfe+N2V59/kMadRUDPGb+CXa2q9g5u0BdjNrEZOs/+L9TB/3ETpLQzVFmA/0xp5/m2L46Tb2QgQvPwL5VB/BAhe/lVJwXsRwMfUUjgB83wNBAhe/oWyuDEC+JNzt+kc7S/OQoDg5V+VuwSuQgD/MVrx9GvFPQjgt/yboXvEn81EgODlXyiLGiFA8PIvlM0dEcAvDCwyLnDgCgQIXv5VuV/0bgQIYP6F8kwGAnidU5YaF3mvAQIEL/9Cye+AAMHLv1D29UUAz5LyYKVxnfIRCODV/PtfY4Wn0xEgePkXyjv1EMB7dN1urLGhHQJ4jeuKjEX2XoIAwcu/UMqGI0AA8y+Up9IQIHj5F8pbOQgQvPwL5bO2CBC8/Atldx8ESHz+PVRpEkbprQgQwPwLZWIqAiQ0/5aZBPNGHQQIXv6FsrYNAgQv/0Ip7I0Awcu/UEqGIkAi8u9V4xnGpyKAbZovMx5ibm0ECF7+hbKqFQLY5Poi4zEKeiCAvfz7nfEexTchQADzL5RHUxAgePkXyuxsBHCf8742nuXTUxHAZ/n3ta5OO85HAF/l3/IWLZarvuCRGxDARbJm6h7H3Kx/vWau7muOSUEAv+Tfw9/NVcrDuq86MwsBfJF/xz6tbzii+sLLmiOAGwxSzr9ux166m65a27sigH7+jdE9hCuq7MHaYoXqixcNRAAf5F+V19dNwcrRCKCbf7p/rP07/6p8wiin4N9qIoAP8i8U5RT8pBkCqOWf7tRUc7rOOX+H6jBfnYMAPsg/F1Pw8LUI4MH8mxVmV9isWbopeD8CxI3yuXozNiXsp81Y3dFeqoEA8aF8iubIjdKAN+r2xpImCBAPN9jJPxdT8MtOCOCZ/Kvufo2qnPqp6qAH/wsBYs0/5Qu1s7IjGzdbNwUrRiGAJ/LvkZSIP3ke0R35udsRIPH5NziawQfrtscBBEh4/nWPbvjuO4yXSXoBtC/NRJZ/LqYgAiQ0/2ZnR/8esmcjQMLyT/ecfBT552YKIkDE+af7/Vs8ONY3MrgYAfyffzu7x/5Wuu9EgODlnx9SMHkFUL4ga+Zkx/d+sucggJ/z71Ep/047TfpEehQB7KF8JS7cmg3fc9Hu3RdJP3NTMQJY4kbb+Te81JhScesHD6ZgUgqgfTfOypbCgOlTvv/BKdIuYC1XIkAS5l+DhUd/dKG0IaznUjAJBbCefx03HfvhTR19loLJJ4D1/LuyyiXaA1f6KwWTTgDt/OshDTiq4oTbdgR67ESApMm/Gi+c+Esv1PBRCiaXAMr34JnXpPxrmneyX8trKr3P1xDADbTPt/9eyr9zt538F7edK31S/R4BvJ9/N0sDVr/QXNH10u/eXIwAyijfflkg5V/4q40PS58ePQoQQDX/lO+6WSXlX23hlM6c2lIKrkIAxfxTvu/uNWn6WonTF37h/28Veg0BvJp/46RN/C7YJb/IrguEF0kdhwA6KF9lK/6ZNOCtpZG8jrwd6M+KEUAj/3QPY0FPYby0SZG+1CRpZ/ieBQjgufyTvrvrL4j8xRbUj7slEMBu/v1dyr/2G6N5uY3tpRT8OwL4Kv/67Y/yCPfzdAr6XQDr+TeyPNrXLB/p5RT0uQC28y9zeiwvOz3TuynoawG0765ZLeVfk49ie+GPmkgpuBoBYsi/OZbzr/PWWF96a2evpqCPBThV+baKx6T8G3A49hc/PEBKwccQIKH5VzJE+r55MK495isflC4PDilBgChQvrVyVy9hvPjXmZ2ZJQzRaxcCeDb/NE43iI8XJyIF/SmAdv7NlfKvp8r3zU7pr8zacxEgErTvqh0v5d9Qpa/nkqFSCo5HAJkelvMvbYLeYBOky4O2U9CHAtjOv5w3NYd7M8dbKeg7AbRvqF7dWhiw3XrdAde3EwZsvRoB7OXf63WEAfvu1T7ke/sKQ9Z5HQE8k393lusf8/I7PZSC/hJAO/+kKM+Y5s5Rn5Zh6c+OJBNA+WmaXb2F8Rp/4NZh/6CxMHTvXQjgdv6tkfKv0xb3jvuWTlIKrkGA486SKT9GIebfNQfdPPAHr/FGCvpGAO38e1zKvwcq3T3ylQ9IKfg4AoTkn+5NUyW3COPVmuH+sZ9RS3gTt5QgQILyr/kyG//7ljVPfAr6QoBU2/l3vqVtXsTdB91PQT8IoJ1/8+rY/bwJg7gIRZ15CKD9HP0TQv7ZvTtPuhMx9YmgC9DTcv7VnWesMq9uQlPQ8wIoPzVTKD2z33adscy6tsJbuqAwuAJoPze3to0w4CV7jHX2XCK8qTZrgyqA9uMSYv79sswkgLJfJi4FPS1AK8v5lzHVJIipGYlKQS8LoJ1/w4TxGr5vEsb7DYU3N6wkcALYzr8zN5sEsvnMxKSgZwWwnn9Xf2MSyjdXJyQFvSqAdv69If21fV+FSTAV90lnKN4IjgDa+TdByL+aLxkP8FJN4VNxQlAEUM6/0p8L4zX7xHiCT5oJb/TnpYEQQDv/LhTGO2+78QjbzxPe6oWFyS+A9sWYddKWnsp7TMfFkRuEN3vaumQXwHb+eW0bL2mTMu0U/EOax/JP+cGoial2fYsfaami1Im6472V46X572U5/9qsMZ5jTRu7Kfj56d6Zf+WHo3dL+den0HiQwj5SCu62ezkyafPv9lLjSUpvt5uCZcO9kX/KC6TMF/IvfbLxLJOFbajrzrc7ni/zT8jbBu8aD/OusA11mnIKvlMv4fmnew+8uFvHGfnG0+SfIfwDbtX9/trww+TKP6mjfnzAeJwDP5YKVjcF912WyPxTXhJBzL/fVBjPU/Ebyyk4IjD5V+N54wuer2E3BacmKAW1l0V6Usi/ph8bn/CxsA112pO64y1skAz5d5swXpevjG/4qovwj7lNNwXzO9if/6GW8++6w8ZHHL7Obgruv9zn+feZ8JxNyhjjM8YIlwfbfqY6XPldVudfeyGUN4X8y55lfMesbCEF39Qd788ZFvNP+WKcdHG71UrjQ1YKi9mn/UF3vH80tDX/vS3nX+8C40sKettNwc0d/Zl/F0nX0UuMTymR7mu4SDcFxbOQKvmnvAqWlH/afzPbRTq3oZyCFff4L/+EO5vqvW18zdvC5boc5RT8a2Zy5V/7DcbnbGhvNwU/bOyn/JNuobl8n/E9+6RzNMo3OH1xlnvzr7zuzR4p/+4uN0lA+d1SCuqub3Lwap/k3+dC/mU+a5KEZ4Uv5raf66bgKF/kn3Rj+w8Wm6Rh8Q+EFHxLdzzpgrQX8m+SkH9nf2mSiC/PFlJwku54S5r4Pf+uPWSSikPX2k1BybhE59/FwsW/0ZUmyagcLVwevFg3BQ9do5l/yqtdSU81Zb1qkpBXhW2oT9dNwcr79fJPeb27t4X8O3WFSUpWCNtQ5yif9Xy5ps78az+J+ZSQf8qbjHmInT2EFHxKd7y8phrzr7zQWdkvpEcNik3SUixtePwL3TVPxXsTvZd/bq+znmikZU+VU/DwAJ/lX858k+TMz7GbgqN9lX/K/3pPIv4fUE5BcZOrcPmnvMqllH+X7TUBYO9ldlNw6SleyT9pPYMRZSYQiE/zDdc9ENu7xjb/yitd7xVWNMl4xgSGZ4RbuC/R/Sgsut4D+be+XfjxGi0yAWJRo/BHo9163fF+l5Lo/Fsg3Bt31hcmUEj37dRboDvezKzE5t9kIf/6HzQB42B/IQWVl0Ja3sLL+Xd/pQkc4sUa5RQU9ztNXP7VesUEkldqWU3BIzdGmn/K69tL+dd8qQkoS5vbTcFHIkpB7WWNpfzr9rUJLF93s5uCs7Pt598fhQVsBh8xAebI4PBHJ/2PuuOtbCnNv/LWBmV3CF8340zAGSdcHrxDNwWlWxKUV7Tee6ndW839yOvCvqiX6qZg8c0W82+DkH+nrWX+jVkrrI7YboOtzxzt/JMWsr14N7P/LbuFm2TqvaM7XnV7W2jvayPl3x1lzH1kpaSdgqtb28g/YW/t9KeZ+GM8LfxnUd4ffVfvhOdfg/eY9VDea2A1BUtuOT7/lNexl1Yx77iZOa+KtMLTD5VTsOrdqdrLF79TP/y/5qpvmPHj+eaq8MesvnIKzqvrXv5NEb7RRlUw3yciPdafPsWtPz976/45JuVfzReZ7JPzYk2rKVjY69/fLvtUX1bawqJZHjNdHXnCNtSXKU/Vd6WWo3vNUcq/rtuY5+rZ1tVqCq7/9jkN3f57V8i/QUXMcjiKBgkpqLtp2nzHaWvzhEbKWKZYYmyKzRNobZ3hmvn3q/D61p7D/MrMEbah/pVmCg53chWboq+wztRqZjcSTn6q/hh9FVMw19Fbin1je6v3miQxhcLu2e03qg1V4GyxlX+3lTKzkSJtoaCXglucJXbyT/uR12RHeJBaLQWXKDVA+Qi7J7KTH+lyygiddZRzncds5F+Hjcxo1EnVwUYKPua0VFiTScq/K/Yzn9Gz/wr3U7C4pePEv0rtQuHT6h4u/sWEtAFM/YVxDzHp21W5412VV9i7uMZ0pjJWpodf9Tt9apyvf+i7VcyHuZp/TT5iHmPnoyaupuCw718lno0g9v0o/Ds8ZyuzGA9bzwl/fH8UTwo+fvSGwLkxv0S+kH8DDjOH8SEt9dg+P+aXnvuf2wJrr4o1/8Lfy5ryUCUzGC+VD4W/PNgg1hRcFXLRqVVsVwT+FD7/snOZPpWTNeEf6k7/U0yvWlBla+MeMZwNKP91+A+nlp8ydzp8KjzU/esYUrD4uMeEB0d/nkLIv14FzJwWBb2EFIz+TNsJCxNEe69Ofgerq4wHnBOe5Dn+XHu0KTj2xGCL7gtbeJQpbSKTpsvENM1H7XJPEpZZy/XyT3sfPBD3WYwqBZefdNnI5tsjzr87hZuX1zNf+qwXbri/M+IU3F7N6mRdI7xle//l9u5Zg2NIF90vjzAFi6p9+GBgROdtpPy7q5y5cofyuzRSsHJg9a8wOv78y/wLE+Uef8mMPwXDbiIjL9oqLHXf+ENmyU0+bBzvpguvhH9yNy++/Ou0hTlyly2d4kvBPOEJ5KZb48m/nxxihtzm0E/iScGt4l6SZ4eZw01nhP/dB7j4Z4HKB8LPwhmbwtgTwabi/au9g+/98PlXawaTYwdhJ7gG71f3ixX9I1ku/N7Y8q/FcmbGFsL2H9Wm4L2RbRjwXCx/gzqvMi/2mOnEci7muQh3jMg8yZ9y+/tJv8XpX4tslGaj30lS8MPMSLeMafzPaPPvX/Dwh0X2i9NxYgr+s3HkmwadueO4/GvoIIC/BHAaHpeCO86MZtuwph+E/t0xNcNBAL8J4GRUuUD8QVMnKtKfOPo4f8WMThH9BgJ4TADHuXDF0Z8vfSLdiZb6Q+YWH9m0aGr7CH8eATwngJM65NlF282h3MH1nJjIiOaHEcB7Anw/i2mOFRDAowLYAgEQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAABEAABEAABEAABEAABEAABEAABEKAK+XnK5COArwQYpP3PG4QACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAACIAAARWgEAHsUehBAdYggD3WeVCAtxHAHgs9KMBfEcAeL3tQgPs9dYSuT24BxnhQgM58AtijmwcFcLYigC22p3hRgCkIYIupXpx/p3MlAtihsrMnBXBeRAA7vOjN+XdaFSOADYpbeVQAZywC2GCsV+ffSZ2HAO4zL9WzAjh1ViOA26yu43iYVtsQwF22tXI8zSlLEcBNlp7ieJxaMxDAPWbUcrzPiD0I4A57Rji+oP6EEgTQp2RCfccvtB61uAIBNKlYPKq14ysaDRw5/oX5byWKPtr/nj4J+6fMf2H8yIGNHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPA1/w+6IpPeMz1YdgAAAABJRU5ErkJggg==\""],"sourceRoot":""}